{"version":3,"sources":["tmp/js/components/cookie-functions.js","tmp/js/components/postcode.js","tmp/js/components/analytics.js","tmp/js/components/cookie-banner.js","tmp/js/app.js"],"names":["CONSENT_COOKIE_NAME","getCookie","name","cookieArr","document","cookie","split","i","length","cookiePair","trim","decodeURIComponent","areAnalyticsAccepted","consentCookie","console","log","INCODE_REGEX","POSTCODE_REGEX","SPACE_REGEX","sanitize","s","replace","toUpperCase","isValid","postcode","match","toOutcode","gtag","command","args","window","dataLayer","push","arguments","GaMeasurementId","initAnalytics","gaMeasurementId","Boolean","setDefaultConsent","loadGaScript","Date","pageViewParams","getPiiSafePageView","send_page_view","page_path","page_location","page_referrer","referrer","cookie_flags","updateAnalyticsStorageConsent","sendPageViewEvent","analytics_storage","granted","delayMs","options","f","getElementsByTagName","j","createElement","async","src","parentNode","insertBefore","pageView","page_title","title","send_to","piiSafeReferrerQueryString","getPiiSafeQueryString","URL","search","urlArray","piiSafeQueryString","location","href","pathname","queryString","queryParams","URLSearchParams","get","set","delete","toString","cookiesBanner","$cookiesBanner","$","$cookiesBannerMessage","$cookiesBannerConfirmation","$cookiesBannerAccepted","$cookiesBannerRejected","date","setTime","getTime","cookiesAccept","addClass","removeClass","prop","cookiesReject","deleteCookies","cookies","equals","indexOf","substr","cookie_value","click","is","animate","scrollTop","GA_MEASUREMENT_ID","fhgov","this","init","showHideFilters","evt","preventDefault","toggleClass","jQuery"],"mappings":"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","file":"app.js","sourcesContent":["/* Name of the cookie to save users cookie preferences to. */\nconst CONSENT_COOKIE_NAME = 'service_directory_cookies_policy';\nexport function getCookie(name) {\n    let cookieArr = document.cookie.split(\";\");\n    for (let i = 0; i < cookieArr.length; i++) {\n        let cookiePair = cookieArr[i].split(\"=\");\n        if (name == cookiePair[0].trim()) {\n            return decodeURIComponent(cookiePair[1]);\n        }\n    }\n}\nexport function areAnalyticsAccepted() {\n    var consentCookie = getCookie(CONSENT_COOKIE_NAME);\n    console.log(consentCookie);\n    if (consentCookie == 'accept') {\n        return true;\n    }\n    return false;\n}\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbXBvbmVudHMvY29va2llLWZ1bmN0aW9ucy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSw2REFBNkQ7QUFDN0QsTUFBTSxtQkFBbUIsR0FBRyxrQ0FBa0MsQ0FBQztBQUUvRCxNQUFNLFVBQVUsU0FBUyxDQUFDLElBQVk7SUFDckMsSUFBSSxTQUFTLEdBQUcsUUFBUSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDM0MsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLFNBQVMsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7UUFDMUMsSUFBSSxVQUFVLEdBQUcsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUN6QyxJQUFJLElBQUksSUFBSSxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFLEVBQUU7WUFDakMsT0FBTyxrQkFBa0IsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztTQUN6QztLQUNEO0FBQ0YsQ0FBQztBQUVELE1BQU0sVUFBVSxvQkFBb0I7SUFDaEMsSUFBSSxhQUFhLEdBQUcsU0FBUyxDQUFDLG1CQUFtQixDQUFDLENBQUM7SUFDdEQsT0FBTyxDQUFDLEdBQUcsQ0FBQyxhQUFhLENBQUMsQ0FBQztJQUN4QixJQUFJLGFBQWEsSUFBSSxRQUFRLEVBQUU7UUFDM0IsT0FBTyxJQUFJLENBQUM7S0FDZjtJQUVELE9BQU8sS0FBSyxDQUFDO0FBQ2pCLENBQUMiLCJmaWxlIjoiY29tcG9uZW50cy9jb29raWUtZnVuY3Rpb25zLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyogTmFtZSBvZiB0aGUgY29va2llIHRvIHNhdmUgdXNlcnMgY29va2llIHByZWZlcmVuY2VzIHRvLiAqL1xyXG5jb25zdCBDT05TRU5UX0NPT0tJRV9OQU1FID0gJ3NlcnZpY2VfZGlyZWN0b3J5X2Nvb2tpZXNfcG9saWN5JztcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRDb29raWUobmFtZTogc3RyaW5nKSB7XHJcblx0bGV0IGNvb2tpZUFyciA9IGRvY3VtZW50LmNvb2tpZS5zcGxpdChcIjtcIik7XHJcblx0Zm9yIChsZXQgaSA9IDA7IGkgPCBjb29raWVBcnIubGVuZ3RoOyBpKyspIHtcclxuXHRcdGxldCBjb29raWVQYWlyID0gY29va2llQXJyW2ldLnNwbGl0KFwiPVwiKTtcclxuXHRcdGlmIChuYW1lID09IGNvb2tpZVBhaXJbMF0udHJpbSgpKSB7XHJcblx0XHRcdHJldHVybiBkZWNvZGVVUklDb21wb25lbnQoY29va2llUGFpclsxXSk7XHJcblx0XHR9XHJcblx0fVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gYXJlQW5hbHl0aWNzQWNjZXB0ZWQoKTogYm9vbGVhbiB7XHJcbiAgICB2YXIgY29uc2VudENvb2tpZSA9IGdldENvb2tpZShDT05TRU5UX0NPT0tJRV9OQU1FKTtcclxuXHRjb25zb2xlLmxvZyhjb25zZW50Q29va2llKTtcclxuICAgIGlmIChjb25zZW50Q29va2llID09ICdhY2NlcHQnKSB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9IFxyXG5cclxuICAgIHJldHVybiBmYWxzZTtcclxufSJdfQ==\n","// from https://github.com/ideal-postcodes/postcode\n/**\n * @hidden\n */\nexport const DISTRICT_SPLIT_REGEX = /^([a-z]{1,2}\\d)([a-z])$/i;\n/**\n * Tests for the unit section of a postcode\n */\nexport const UNIT_REGEX = /[a-z]{2}$/i;\n/**\n * Tests for the inward code section of a postcode\n */\nexport const INCODE_REGEX = /\\d[a-z]{2}$/i;\n/**\n * Tests for the outward code section of a postcode\n */\nexport const OUTCODE_REGEX = /^[a-z]{1,2}\\d[a-z\\d]?$/i;\n/**\n * Tests for a valid postcode\n */\nexport const POSTCODE_REGEX = /^[a-z]{1,2}\\d[a-z\\d]?\\s*\\d[a-z]{2}$/i;\n/**\n * Test for a valid postcode embedded in text\n */\nexport const POSTCODE_CORPUS_REGEX = /[a-z]{1,2}\\d[a-z\\d]?\\s*\\d[a-z]{2}/gi;\n/**\n * Tests for the area section of a postcode\n */\nexport const AREA_REGEX = /^[a-z]{1,2}/i;\n/**\n * Invalid postcode prototype\n * @hidden\n */\nconst invalidPostcode = {\n    valid: false,\n    postcode: null,\n    incode: null,\n    outcode: null,\n    area: null,\n    district: null,\n    subDistrict: null,\n    sector: null,\n    unit: null,\n};\n/**\n * Return first elem of input is RegExpMatchArray or null if input null\n * @hidden\n */\nconst firstOrNull = (match) => {\n    if (match === null)\n        return null;\n    return match[0];\n};\nconst SPACE_REGEX = /\\s+/gi;\n/**\n * Drop all spaces and uppercase\n * @hidden\n */\nconst sanitize = (s) => s.replace(SPACE_REGEX, \"\").toUpperCase();\n/**\n * Sanitizes string and returns regex matches\n * @hidden\n */\nconst matchOn = (s, regex) => sanitize(s).match(regex);\n/**\n * Detects a \"valid\" postcode\n * - Starts and ends on a non-space character\n * - Any length of intervening space is allowed\n * - Must conform to one of following schemas:\n *  - AA1A 1AA\n *  - A1A 1AA\n *  - A1 1AA\n *  - A99 9AA\n *  - AA9 9AA\n *  - AA99 9AA\n */\nexport const isValid = (postcode) => postcode.match(POSTCODE_REGEX) !== null;\n/**\n * Returns true if string is a valid outcode\n */\nexport const validOutcode = (outcode) => outcode.match(OUTCODE_REGEX) !== null;\n/**\n * Returns a normalised postcode string (i.e. uppercased and properly spaced)\n *\n * Returns null if invalid postcode\n */\nexport const toNormalised = (postcode) => {\n    const outcode = toOutcode(postcode);\n    if (outcode === null)\n        return null;\n    const incode = toIncode(postcode);\n    if (incode === null)\n        return null;\n    return `${outcode} ${incode}`;\n};\n/**\n * Returns a correctly formatted outcode given a postcode\n *\n * Returns null if invalid postcode\n */\nexport const toOutcode = (postcode) => {\n    if (!isValid(postcode))\n        return null;\n    return sanitize(postcode).replace(INCODE_REGEX, \"\");\n};\n/**\n * Returns a correctly formatted incode given a postcode\n *\n * Returns null if invalid postcode\n */\nexport const toIncode = (postcode) => {\n    if (!isValid(postcode))\n        return null;\n    const match = matchOn(postcode, INCODE_REGEX);\n    return firstOrNull(match);\n};\n/**\n * Returns a correctly formatted area given a postcode\n *\n * Returns null if invalid postcode\n */\nexport const toArea = (postcode) => {\n    if (!isValid(postcode))\n        return null;\n    const match = matchOn(postcode, AREA_REGEX);\n    return firstOrNull(match);\n};\n/**\n * Returns a correctly formatted sector given a postcode\n *\n * Returns null if invalid postcode\n */\nexport const toSector = (postcode) => {\n    const outcode = toOutcode(postcode);\n    if (outcode === null)\n        return null;\n    const incode = toIncode(postcode);\n    if (incode === null)\n        return null;\n    return `${outcode} ${incode[0]}`;\n};\n/**\n * Returns a correctly formatted unit given a postcode\n *\n * Returns null if invalid postcode\n */\nexport const toUnit = (postcode) => {\n    if (!isValid(postcode))\n        return null;\n    const match = matchOn(postcode, UNIT_REGEX);\n    return firstOrNull(match);\n};\n/**\n * Returns a correctly formatted district given a postcode\n *\n * Returns null if invalid postcode\n *\n * @example\n *\n * ```\n * toDistrict(\"AA9 9AA\") // => \"AA9\"\n * toDistrict(\"A9A 9AA\") // => \"A9\"\n * ```\n */\nexport const toDistrict = (postcode) => {\n    const outcode = toOutcode(postcode);\n    if (outcode === null)\n        return null;\n    const match = outcode.match(DISTRICT_SPLIT_REGEX);\n    if (match === null)\n        return outcode;\n    return match[1];\n};\n/**\n * Returns a correctly formatted subdistrict given a postcode\n *\n * Returns null if no subdistrict is available on valid postcode\n * Returns null if invalid postcode\n *\n * @example\n *\n * ```\n * toSubDistrict(\"AA9A 9AA\") // => \"AA9A\"\n * toSubDistrict(\"A9A 9AA\") // => \"A9A\"\n * toSubDistrict(\"AA9 9AA\") // => null\n * toSubDistrict(\"A9 9AA\") // => null\n * ```\n */\nexport const toSubDistrict = (postcode) => {\n    const outcode = toOutcode(postcode);\n    if (outcode === null)\n        return null;\n    const split = outcode.match(DISTRICT_SPLIT_REGEX);\n    if (split === null)\n        return null;\n    return outcode;\n};\n/**\n * Returns a ValidPostcode or InvalidPostcode object from a postcode string\n *\n * @example\n *\n * ```\n * import { parse } from \"postcode\";\n *\n * const {\n * postcode,    // => \"SW1A 2AA\"\n * outcode,     // => \"SW1A\"\n * incode,      // => \"2AA\"\n * area,        // => \"SW\"\n * district,    // => \"SW1\"\n * unit,        // => \"AA\"\n * sector,      // => \"SW1A 2\"\n * subDistrict, // => \"SW1A\"\n * valid,       // => true\n * } = parse(\"Sw1A     2aa\");\n *\n * const {\n * postcode,    // => null\n * outcode,     // => null\n * incode,      // => null\n * area,        // => null\n * district,    // => null\n * unit,        // => null\n * sector,      // => null\n * subDistrict, // => null\n * valid,       // => false\n * } = parse(\"    Oh no, ):   \");\n * ```\n */\nexport const parse = (postcode) => {\n    if (!isValid(postcode))\n        return Object.assign({}, invalidPostcode);\n    return {\n        valid: true,\n        postcode: toNormalised(postcode),\n        incode: toIncode(postcode),\n        outcode: toOutcode(postcode),\n        area: toArea(postcode),\n        district: toDistrict(postcode),\n        subDistrict: toSubDistrict(postcode),\n        sector: toSector(postcode),\n        unit: toUnit(postcode),\n    };\n};\n/**\n * Searches a body of text for postcode matches\n *\n * Returns an empty array if no match\n *\n * @example\n *\n * ```\n * // Retrieve valid postcodes in a body of text\n * const matches = match(\"The PM and her no.2 live at SW1A2aa and SW1A 2AB\"); // => [\"SW1A2aa\", \"SW1A 2AB\"]\n *\n * // Perform transformations like normalisation postcodes using `.map` and `toNormalised`\n * matches.map(toNormalised); // => [\"SW1A 2AA\", \"SW1A 2AB\"]\n *\n * // No matches yields empty array\n * match(\"Some London outward codes are SW1A, NW1 and E1\"); // => []\n * ```\n */\nexport const match = (corpus) => corpus.match(POSTCODE_CORPUS_REGEX) || [];\n/**\n * Replaces postcodes in a body of text with a string\n *\n * By default the replacement string is empty string `\"\"`\n *\n * @example\n *\n * ```\n * // Replace postcodes in a body of text\n * replace(\"The PM and her no.2 live at SW1A2AA and SW1A 2AB\");\n * // => { match: [\"SW1A2AA\", \"SW1A 2AB\"], result: \"The PM and her no.2 live at  and \" }\n *\n * // Add custom replacement\n * replace(\"The PM lives at SW1A 2AA\", \"Downing Street\");\n * // => { match: [\"SW1A 2AA\"], result: \"The PM lives at Downing Street\" };\n *\n * // No match\n * replace(\"Some London outward codes are SW1A, NW1 and E1\");\n * // => { match: [], result: \"Some London outward codes are SW1A, NW1 and E1\" }\n * ```\n */\nexport const replace = (corpus, replaceWith = \"\") => ({\n    match: match(corpus),\n    result: corpus.replace(POSTCODE_CORPUS_REGEX, replaceWith),\n});\nexport const FIXABLE_REGEX = /^\\s*[a-z01]{1,2}[0-9oi][a-z\\d]?\\s*[0-9oi][a-z01]{2}\\s*$/i;\n/**\n * Attempts to fix and clean a postcode. Specifically:\n * - Performs character conversion on obviously wrong and commonly mixed up letters (e.g. O => 0 and vice versa)\n * - Trims string\n * - Properly adds space between outward and inward codes\n *\n * If the postcode cannot be coerced into a valid format, the original string is returned\n *\n * @example\n * ```javascript\n * fix(\" SW1A  2AO\") => \"SW1A 2AO\" // Properly spaces\n * fix(\"SW1A 2A0\") => \"SW1A 2AO\" // 0 is coerced into \"0\"\n * ```\n *\n * Aims to be used in conjunction with parse to make postcode entry more forgiving:\n *\n * @example\n * ```javascript\n * const { inward } = parse(fix(\"SW1A 2A0\")); // inward = \"2AO\"\n * ```\n */\nexport const fix = (s) => {\n    const match = s.match(FIXABLE_REGEX);\n    if (match === null)\n        return s;\n    s = s.toUpperCase().trim().replace(/\\s+/gi, \"\");\n    const l = s.length;\n    const inward = s.slice(l - 3, l);\n    return `${coerceOutcode(s.slice(0, l - 3))} ${coerce(\"NLL\", inward)}`;\n};\nconst toLetter = {\n    \"0\": \"O\",\n    \"1\": \"I\",\n};\nconst toNumber = {\n    O: \"0\",\n    I: \"1\",\n};\nconst coerceOutcode = (i) => {\n    if (i.length === 2)\n        return coerce(\"LN\", i);\n    if (i.length === 3)\n        return coerce(\"L??\", i);\n    if (i.length === 4)\n        return coerce(\"LLN?\", i);\n    return i;\n};\n/**\n * Given a pattern of letters, numbers and unknowns represented as a sequence\n * of L, Ns and ? respectively; coerce them into the correct type given a\n * mapping of potentially confused letters\n *\n * @hidden\n *\n * @example coerce(\"LLN\", \"0O8\") => \"OO8\"\n */\nconst coerce = (pattern, input) => input\n    .split(\"\")\n    .reduce((acc, c, i) => {\n    const target = pattern.charAt(i);\n    if (target === \"N\")\n        acc.push(toNumber[c] || c);\n    if (target === \"L\")\n        acc.push(toLetter[c] || c);\n    if (target === \"?\")\n        acc.push(c);\n    return acc;\n}, [])\n    .join(\"\");\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbXBvbmVudHMvcG9zdGNvZGUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsbURBQW1EO0FBRW5EOztHQUVHO0FBQ0gsTUFBTSxDQUFDLE1BQU0sb0JBQW9CLEdBQUcsMEJBQTBCLENBQUM7QUFDL0Q7O0dBRUc7QUFDSCxNQUFNLENBQUMsTUFBTSxVQUFVLEdBQUcsWUFBWSxDQUFDO0FBQ3ZDOztHQUVHO0FBQ0gsTUFBTSxDQUFDLE1BQU0sWUFBWSxHQUFHLGNBQWMsQ0FBQztBQUMzQzs7R0FFRztBQUNILE1BQU0sQ0FBQyxNQUFNLGFBQWEsR0FBRyx5QkFBeUIsQ0FBQztBQUN2RDs7R0FFRztBQUNILE1BQU0sQ0FBQyxNQUFNLGNBQWMsR0FBRyxzQ0FBc0MsQ0FBQztBQUVyRTs7R0FFRztBQUNILE1BQU0sQ0FBQyxNQUFNLHFCQUFxQixHQUFHLHFDQUFxQyxDQUFDO0FBRTNFOztHQUVHO0FBQ0gsTUFBTSxDQUFDLE1BQU0sVUFBVSxHQUFHLGNBQWMsQ0FBQztBQWdEekM7OztHQUdHO0FBQ0gsTUFBTSxlQUFlLEdBQW9CO0lBQ3JDLEtBQUssRUFBRSxLQUFLO0lBQ1osUUFBUSxFQUFFLElBQUk7SUFDZCxNQUFNLEVBQUUsSUFBSTtJQUNaLE9BQU8sRUFBRSxJQUFJO0lBQ2IsSUFBSSxFQUFFLElBQUk7SUFDVixRQUFRLEVBQUUsSUFBSTtJQUNkLFdBQVcsRUFBRSxJQUFJO0lBQ2pCLE1BQU0sRUFBRSxJQUFJO0lBQ1osSUFBSSxFQUFFLElBQUk7Q0FDYixDQUFDO0FBRUY7OztHQUdHO0FBQ0gsTUFBTSxXQUFXLEdBQUcsQ0FBQyxLQUE4QixFQUFpQixFQUFFO0lBQ2xFLElBQUksS0FBSyxLQUFLLElBQUk7UUFBRSxPQUFPLElBQUksQ0FBQztJQUNoQyxPQUFPLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNwQixDQUFDLENBQUM7QUFFRixNQUFNLFdBQVcsR0FBRyxPQUFPLENBQUM7QUFFNUI7OztHQUdHO0FBQ0gsTUFBTSxRQUFRLEdB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RyxDQUFDLE9BQWUsRUFBRSxLQUFhLEVBQVUsRUFBRSxDQUN0RCxLQUFLO0tBQ0EsS0FBSyxDQUFDLEVBQUUsQ0FBQztLQUNULE1BQU0sQ0FBVyxDQUFDLEdBQUcsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUU7SUFDNUIsTUFBTSxNQUFNLEdBQUcsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNqQyxJQUFJLE1BQU0sS0FBSyxHQUFHO1FBQUUsR0FBRyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7SUFDL0MsSUFBSSxNQUFNLEtBQUssR0FBRztRQUFFLEdBQUcsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO0lBQy9DLElBQUksTUFBTSxLQUFLLEdBQUc7UUFBRSxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ2hDLE9BQU8sR0FBRyxDQUFDO0FBQ2YsQ0FBQyxFQUFFLEVBQUUsQ0FBQztLQUNMLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyIsImZpbGUiOiJjb21wb25lbnRzL3Bvc3Rjb2RlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gZnJvbSBodHRwczovL2dpdGh1Yi5jb20vaWRlYWwtcG9zdGNvZGVzL3Bvc3Rjb2RlXHJcblxyXG4vKipcclxuICogQGhpZGRlblxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IERJU1RSSUNUX1NQTElUX1JFR0VYID0gL14oW2Etel17MSwyfVxcZCkoW2Etel0pJC9pO1xyXG4vKipcclxuICogVGVzdHMgZm9yIHRoZSB1bml0IHNlY3Rpb24gb2YgYSBwb3N0Y29kZVxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IFVOSVRfUkVHRVggPSAvW2Etel17Mn0kL2k7XHJcbi8qKlxyXG4gKiBUZXN0cyBmb3IgdGhlIGlud2FyZCBjb2RlIHNlY3Rpb24gb2YgYSBwb3N0Y29kZVxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IElOQ09ERV9SRUdFWCA9IC9cXGRbYS16XXsyfSQvaTtcclxuLyoqXHJcbiAqIFRlc3RzIGZvciB0aGUgb3V0d2FyZCBjb2RlIHNlY3Rpb24gb2YgYSBwb3N0Y29kZVxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IE9VVENPREVfUkVHRVggPSAvXlthLXpdezEsMn1cXGRbYS16XFxkXT8kL2k7XHJcbi8qKlxyXG4gKiBUZXN0cyBmb3IgYSB2YWxpZCBwb3N0Y29kZVxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IFBPU1RDT0RFX1JFR0VYID0gL15bYS16XXsxLDJ9XFxkW2EtelxcZF0/XFxzKlxcZFthLXpdezJ9JC9pO1xyXG5cclxuLyoqXHJcbiAqIFRlc3QgZm9yIGEgdmFsaWQgcG9zdGNvZGUgZW1iZWRkZWQgaW4gdGV4dFxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IFBPU1RDT0RFX0NPUlBVU19SRUdFWCA9IC9bYS16XXsxLDJ9XFxkW2EtelxcZF0/XFxzKlxcZFthLXpdezJ9L2dpO1xyXG5cclxuLyoqXHJcbiAqIFRlc3RzIGZvciB0aGUgYXJlYSBzZWN0aW9uIG9mIGEgcG9zdGNvZGVcclxuICovXHJcbmV4cG9ydCBjb25zdCBBUkVBX1JFR0VYID0gL15bYS16XXsxLDJ9L2k7XHJcblxyXG4vKipcclxuICogQGhpZGRlblxyXG4gKi9cclxuaW50ZXJmYWNlIFZhbGlkYXRvciB7XHJcbiAgICAoaW5wdXQ6IHN0cmluZyk6IGJvb2xlYW47XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAaGlkZGVuXHJcbiAqL1xyXG5pbnRlcmZhY2UgUGFyc2VyIHtcclxuICAgIC8qKlxyXG4gICAgICogQGhpZGRlblxyXG4gICAgICovXHJcbiAgICAocG9zdGNvZGU6IHN0cmluZyk6IHN0cmluZyB8IG51bGw7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBSZXByZXNlbnRzIGEgdmFsaWQgcG9zdGNvZGVcclxuICpcclxuICogTm90ZSB0aGF0IHJlc3VsdHMgd2lsbCBiZSBub3JtYWxpc2VkIChpLmUuIGNvcnJlY3RseSBmb3JtYXR0ZWQpLCBpbmNsdWRpbmcgYHBvc3Rjb2RlYFxyXG4gKi9cclxudHlwZSBWYWxpZFBvc3Rjb2RlID0ge1xyXG4gICAgdmFsaWQ6IHRydWU7XHJcbiAgICBwb3N0Y29kZTogc3RyaW5nO1xyXG4gICAgaW5jb2RlOiBzdHJpbmc7XHJcbiAgICBvdXRjb2RlOiBzdHJpbmc7XHJcbiAgICBhcmVhOiBzdHJpbmc7XHJcbiAgICBkaXN0cmljdDogc3RyaW5nO1xyXG4gICAgc3ViRGlzdHJpY3Q6IHN0cmluZyB8IG51bGw7XHJcbiAgICBzZWN0b3I6IHN0cmluZztcclxuICAgIHVuaXQ6IHN0cmluZztcclxufTtcclxuXHJcbnR5cGUgSW52YWxpZFBvc3Rjb2RlID0ge1xyXG4gICAgdmFsaWQ6IGZhbHNlO1xyXG4gICAgcG9zdGNvZGU6IG51bGw7XHJcbiAgICBpbmNvZGU6IG51bGw7XHJcbiAgICBvdXRjb2RlOiBudWxsO1xyXG4gICAgYXJlYTogbnVsbDtcclxuICAgIGRpc3RyaWN0OiBudWxsO1xyXG4gICAgc3ViRGlzdHJpY3Q6IG51bGw7XHJcbiAgICBzZWN0b3I6IG51bGw7XHJcbiAgICB1bml0OiBudWxsO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIEludmFsaWQgcG9zdGNvZGUgcHJvdG90eXBlXHJcbiAqIEBoaWRkZW5cclxuICovXHJcbmNvbnN0IGludmFsaWRQb3N0Y29kZTogSW52YWxpZFBvc3Rjb2RlID0ge1xyXG4gICAgdmFsaWQ6IGZhbHNlLFxyXG4gICAgcG9zdGNvZGU6IG51bGwsXHJcbiAgICBpbmNvZGU6IG51bGwsXHJcbiAgICBvdXRjb2RlOiBudWxsLFxyXG4gICAgYXJlYTogbnVsbCxcclxuICAgIGRpc3RyaWN0OiBudWxsLFxyXG4gICAgc3ViRGlzdHJpY3Q6IG51bGwsXHJcbiAgICBzZWN0b3I6IG51bGwsXHJcbiAgICB1bml0OiBudWxsLFxyXG59O1xyXG5cclxuLyoqXHJcbiAqIFJldHVybiBmaXJzdCBlbGVtIG9mIGlucHV0IGlzIFJlZ0V4cE1hdGNoQXJyYXkgb3IgbnVsbCBpZiBpbnB1dCBudWxsXHJcbiAqIEBoaWRkZW5cclxuICovXHJcbmNvbnN0IGZpcnN0T3JOdWxsID0gKG1hdGNoOiBSZWdFeHBNYXRjaEFycmF5IHwgbnVsbCk6IHN0cmluZyB8IG51bGwgPT4ge1xyXG4gICAgaWYgKG1hdGNoID09PSBudWxsKSByZXR1cm4gbnVsbDtcclxuICAgIHJldHVybiBtYXRjaFswXTtcclxufTtcclxuXHJcbmNvbnN0IFNQQUNFX1JFR0VYID0gL1xccysvZ2k7XHJcblxyXG4vKipcclxuICogRHJvcCBhbGwgc3BhY2VzIGFuZCB1cHBlcmNhc2VcclxuICogQGhpZGRlblxyXG4gKi9cclxuY29uc3Qgc2FuaXRpemUgPSAoczogc3RyaW5nKTogc3RyaW5nID0+XHJcbiAgICBzLnJlcGxhY2UoU1BBQ0VfUkVHRVgsIFwiXCIpLnRvVXBwZXJDYXNlKCk7XHJcblxyXG4vKipcclxuICogU2FuaXRpemVzIHN0cmluZyBhbmQgcmV0dXJucyByZWdleCBtYXRjaGVzXHJcbiAqIEBoaWRkZW5cclxuICovXHJcbmNvbnN0IG1hdGNoT24gPSAoczogc3RyaW5nLCByZWdleDogUmVnRXhwKTogUmVnRXhwTWF0Y2hBcnJheSB8IG51bGwgPT5cclxuICAgIHNhbml0aXplKHMpLm1hdGNoKHJlZ2V4KTtcclxuXHJcbi8qKlxyXG4gKiBEZXRlY3RzIGEgXCJ2YWxpZFwiIHBvc3Rjb2RlXHJcbiAqIC0gU3RhcnRzIGFuZCBlbmRzIG9uIGEgbm9uLXNwYWNlIGNoYXJhY3RlclxyXG4gKiAtIEFueSBsZW5ndGggb2YgaW50ZXJ2ZW5pbmcgc3BhY2UgaXMgYWxsb3dlZFxyXG4gKiAtIE11c3QgY29uZm9ybSB0byBvbmUgb2YgZm9sbG93aW5nIHNjaGVtYXM6XHJcbiAqICAtIEFBMUEgMUFBXHJcbiAqICAtIEExQSAxQUFcclxuICogIC0gQTEgMUFBXHJcbiAqICAtIEE5OSA5QUFcclxuICogIC0gQUE5IDlBQVxyXG4gKiAgLSBBQTk5IDlBQVxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IGlzVmFsaWQ6IFZhbGlkYXRvciA9IChwb3N0Y29kZSkgPT5cclxuICAgIHBvc3Rjb2RlLm1hdGNoKFBPU1RDT0RFX1JFR0VYKSAhPT0gbnVsbDtcclxuXHJcbi8qKlxyXG4gKiBSZXR1cm5zIHRydWUgaWYgc3RyaW5nIGlzIGEgdmFsaWQgb3V0Y29kZVxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IHZhbGlkT3V0Y29kZTogVmFsaWRhdG9yID0gKG91dGNvZGUpID0+XHJcbiAgICBvdXRjb2RlLm1hdGNoKE9VVENPREVfUkVHRVgpICE9PSBudWxsO1xyXG5cclxuLyoqXHJcbiAqIFJldHVybnMgYSBub3JtYWxpc2VkIHBvc3Rjb2RlIHN0cmluZyAoaS5lLiB1cHBlcmNhc2VkIGFuZCBwcm9wZXJseSBzcGFjZWQpXHJcbiAqXHJcbiAqIFJldHVybnMgbnVsbCBpZiBpbnZhbGlkIHBvc3Rjb2RlXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgdG9Ob3JtYWxpc2VkOiBQYXJzZXIgPSAocG9zdGNvZGUpID0+IHtcclxuICAgIGNvbnN0IG91dGNvZGUgPSB0b091dGNvZGUocG9zdGNvZGUpO1xyXG4gICAgaWYgKG91dGNvZGUgPT09IG51bGwpIHJldHVybiBudWxsO1xyXG4gICAgY29uc3QgaW5jb2RlID0gdG9JbmNvZGUocG9zdGNvZGUpO1xyXG4gICAgaWYgKGluY29kZSA9PT0gbnVsbCkgcmV0dXJuIG51bGw7XHJcbiAgICByZXR1cm4gYCR7b3V0Y29kZX0gJHtpbmNvZGV9YDtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBSZXR1cm5zIGEgY29ycmVjdGx5IGZvcm1hdHRlZCBvdXRjb2RlIGdpdmVuIGEgcG9zdGNvZGVcclxuICpcclxuICogUmV0dXJucyBudWxsIGlmIGludmFsaWQgcG9zdGNvZGVcclxuICovXHJcbmV4cG9ydCBjb25zdCB0b091dGNvZGU6IFBhcnNlciA9IChwb3N0Y29kZSkgPT4ge1xyXG4gICAgaWYgKCFpc1ZhbGlkKHBvc3Rjb2RlKSkgcmV0dXJuIG51bGw7XHJcbiAgICByZXR1cm4gc2FuaXRpemUocG9zdGNvZGUpLnJlcGxhY2UoSU5DT0RFX1JFR0VYLCBcIlwiKTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBSZXR1cm5zIGEgY29ycmVjdGx5IGZvcm1hdHRlZCBpbmNvZGUgZ2l2ZW4gYSBwb3N0Y29kZVxyXG4gKlxyXG4gKiBSZXR1cm5zIG51bGwgaWYgaW52YWxpZCBwb3N0Y29kZVxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IHRvSW5jb2RlOiBQYXJzZXIgPSAocG9zdGNvZGUpID0+IHtcclxuICAgIGlmICghaXNWYWxpZChwb3N0Y29kZSkpIHJldHVybiBudWxsO1xyXG4gICAgY29uc3QgbWF0Y2ggPSBtYXRjaE9uKHBvc3Rjb2RlLCBJTkNPREVfUkVHRVgpO1xyXG4gICAgcmV0dXJuIGZpcnN0T3JOdWxsKG1hdGNoKTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBSZXR1cm5zIGEgY29ycmVjdGx5IGZvcm1hdHRlZCBhcmVhIGdpdmVuIGEgcG9zdGNvZGVcclxuICpcclxuICogUmV0dXJucyBudWxsIGlmIGludmFsaWQgcG9zdGNvZGVcclxuICovXHJcbmV4cG9ydCBjb25zdCB0b0FyZWE6IFBhcnNlciA9IChwb3N0Y29kZSkgPT4ge1xyXG4gICAgaWYgKCFpc1ZhbGlkKHBvc3Rjb2RlKSkgcmV0dXJuIG51bGw7XHJcbiAgICBjb25zdCBtYXRjaCA9IG1hdGNoT24ocG9zdGNvZGUsIEFSRUFfUkVHRVgpO1xyXG4gICAgcmV0dXJuIGZpcnN0T3JOdWxsKG1hdGNoKTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBSZXR1cm5zIGEgY29ycmVjdGx5IGZvcm1hdHRlZCBzZWN0b3IgZ2l2ZW4gYSBwb3N0Y29kZVxyXG4gKlxyXG4gKiBSZXR1cm5zIG51bGwgaWYgaW52YWxpZCBwb3N0Y29kZVxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IHRvU2VjdG9yOiBQYXJzZXIgPSAocG9zdGNvZGUpID0+IHtcclxuICAgIGNvbnN0IG91dGNvZGUgPSB0b091dGNvZGUocG9zdGNvZGUpO1xyXG4gICAgaWYgKG91dGNvZGUgPT09IG51bGwpIHJldHVybiBudWxsO1xyXG4gICAgY29uc3QgaW5jb2RlID0gdG9JbmNvZGUocG9zdGNvZGUpO1xyXG4gICAgaWYgKGluY29kZSA9PT0gbnVsbCkgcmV0dXJuIG51bGw7XHJcbiAgICByZXR1cm4gYCR7b3V0Y29kZX0gJHtpbmNvZGVbMF19YDtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBSZXR1cm5zIGEgY29ycmVjdGx5IGZvcm1hdHRlZCB1bml0IGdpdmVuIGEgcG9zdGNvZGVcclxuICpcclxuICogUmV0dXJucyBudWxsIGlmIGludmFsaWQgcG9zdGNvZGVcclxuICovXHJcbmV4cG9ydCBjb25zdCB0b1VuaXQ6IFBhcnNlciA9IChwb3N0Y29kZSkgPT4ge1xyXG4gICAgaWYgKCFpc1ZhbGlkKHBvc3Rjb2RlKSkgcmV0dXJuIG51bGw7XHJcbiAgICBjb25zdCBtYXRjaCA9IG1hdGNoT24ocG9zdGNvZGUsIFVOSVRfUkVHRVgpO1xyXG4gICAgcmV0dXJuIGZpcnN0T3JOdWxsKG1hdGNoKTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBSZXR1cm5zIGEgY29ycmVjdGx5IGZvcm1hdHRlZCBkaXN0cmljdCBnaXZlbiBhIHBvc3Rjb2RlXHJcbiAqXHJcbiAqIFJldHVybnMgbnVsbCBpZiBpbnZhbGlkIHBvc3Rjb2RlXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqXHJcbiAqIGBgYFxyXG4gKiB0b0Rpc3RyaWN0KFwiQUE5IDlBQVwiKSAvLyA9PiBcIkFBOVwiXHJcbiAqIHRvRGlzdHJpY3QoXCJBOUEgOUFBXCIpIC8vID0+IFwiQTlcIlxyXG4gKiBgYGBcclxuICovXHJcbmV4cG9ydCBjb25zdCB0b0Rpc3RyaWN0OiBQYXJzZXIgPSAocG9zdGNvZGUpID0+IHtcclxuICAgIGNvbnN0IG91dGNvZGUgPSB0b091dGNvZGUocG9zdGNvZGUpO1xyXG4gICAgaWYgKG91dGNvZGUgPT09IG51bGwpIHJldHVybiBudWxsO1xyXG4gICAgY29uc3QgbWF0Y2ggPSBvdXRjb2RlLm1hdGNoKERJU1RSSUNUX1NQTElUX1JFR0VYKTtcclxuICAgIGlmIChtYXRjaCA9PT0gbnVsbCkgcmV0dXJuIG91dGNvZGU7XHJcbiAgICByZXR1cm4gbWF0Y2hbMV07XHJcbn07XHJcblxyXG4vKipcclxuICogUmV0dXJucyBhIGNvcnJlY3RseSBmb3JtYXR0ZWQgc3ViZGlzdHJpY3QgZ2l2ZW4gYSBwb3N0Y29kZVxyXG4gKlxyXG4gKiBSZXR1cm5zIG51bGwgaWYgbm8gc3ViZGlzdHJpY3QgaXMgYXZhaWxhYmxlIG9uIHZhbGlkIHBvc3Rjb2RlXHJcbiAqIFJldHVybnMgbnVsbCBpZiBpbnZhbGlkIHBvc3Rjb2RlXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqXHJcbiAqIGBgYFxyXG4gKiB0b1N1YkRpc3RyaWN0KFwiQUE5QSA5QUFcIikgLy8gPT4gXCJBQTlBXCJcclxuICogdG9TdWJEaXN0cmljdChcIkE5QSA5QUFcIikgLy8gPT4gXCJBOUFcIlxyXG4gKiB0b1N1YkRpc3RyaWN0KFwiQUE5IDlBQVwiKSAvLyA9PiBudWxsXHJcbiAqIHRvU3ViRGlzdHJpY3QoXCJBOSA5QUFcIikgLy8gPT4gbnVsbFxyXG4gKiBgYGBcclxuICovXHJcbmV4cG9ydCBjb25zdCB0b1N1YkRpc3RyaWN0OiBQYXJzZXIgPSAocG9zdGNvZGUpID0+IHtcclxuICAgIGNvbnN0IG91dGNvZGUgPSB0b091dGNvZGUocG9zdGNvZGUpO1xyXG4gICAgaWYgKG91dGNvZGUgPT09IG51bGwpIHJldHVybiBudWxsO1xyXG4gICAgY29uc3Qgc3BsaXQgPSBvdXRjb2RlLm1hdGNoKERJU1RSSUNUX1NQTElUX1JFR0VYKTtcclxuICAgIGlmIChzcGxpdCA9PT0gbnVsbCkgcmV0dXJuIG51bGw7XHJcbiAgICByZXR1cm4gb3V0Y29kZTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBSZXR1cm5zIGEgVmFsaWRQb3N0Y29kZSBvciBJbnZhbGlkUG9zdGNvZGUgb2JqZWN0IGZyb20gYSBwb3N0Y29kZSBzdHJpbmdcclxuICpcclxuICogQGV4YW1wbGVcclxuICpcclxuICogYGBgXHJcbiAqIGltcG9ydCB7IHBhcnNlIH0gZnJvbSBcInBvc3Rjb2RlXCI7XHJcbiAqXHJcbiAqIGNvbnN0IHtcclxuICogcG9zdGNvZGUsICAgIC8vID0+IFwiU1cxQSAyQUFcIlxyXG4gKiBvdXRjb2RlLCAgICAgLy8gPT4gXCJTVzFBXCJcclxuICogaW5jb2RlLCAgICAgIC8vID0+IFwiMkFBXCJcclxuICogYXJlYSwgICAgICAgIC8vID0+IFwiU1dcIlxyXG4gKiBkaXN0cmljdCwgICAgLy8gPT4gXCJTVzFcIlxyXG4gKiB1bml0LCAgICAgICAgLy8gPT4gXCJBQVwiXHJcbiAqIHNlY3RvciwgICAgICAvLyA9PiBcIlNXMUEgMlwiXHJcbiAqIHN1YkRpc3RyaWN0LCAvLyA9PiBcIlNXMUFcIlxyXG4gKiB2YWxpZCwgICAgICAgLy8gPT4gdHJ1ZVxyXG4gKiB9ID0gcGFyc2UoXCJTdzFBICAgICAyYWFcIik7XHJcbiAqXHJcbiAqIGNvbnN0IHtcclxuICogcG9zdGNvZGUsICAgIC8vID0+IG51bGxcclxuICogb3V0Y29kZSwgICAgIC8vID0+IG51bGxcclxuICogaW5jb2RlLCAgICAgIC8vID0+IG51bGxcclxuICogYXJlYSwgICAgICAgIC8vID0+IG51bGxcclxuICogZGlzdHJpY3QsICAgIC8vID0+IG51bGxcclxuICogdW5pdCwgICAgICAgIC8vID0+IG51bGxcclxuICogc2VjdG9yLCAgICAgIC8vID0+IG51bGxcclxuICogc3ViRGlzdHJpY3QsIC8vID0+IG51bGxcclxuICogdmFsaWQsICAgICAgIC8vID0+IGZhbHNlXHJcbiAqIH0gPSBwYXJzZShcIiAgICBPaCBubywgKTogICBcIik7XHJcbiAqIGBgYFxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IHBhcnNlID0gKHBvc3Rjb2RlOiBzdHJpbmcpOiBWYWxpZFBvc3Rjb2RlIHwgSW52YWxpZFBvc3Rjb2RlID0+IHtcclxuICAgIGlmICghaXNWYWxpZChwb3N0Y29kZSkpIHJldHVybiB7IC4uLmludmFsaWRQb3N0Y29kZSB9O1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICB2YWxpZDogdHJ1ZSxcclxuICAgICAgICBwb3N0Y29kZTogdG9Ob3JtYWxpc2VkKHBvc3Rjb2RlKSBhcyBzdHJpbmcsXHJcbiAgICAgICAgaW5jb2RlOiB0b0luY29kZShwb3N0Y29kZSkgYXMgc3RyaW5nLFxyXG4gICAgICAgIG91dGNvZGU6IHRvT3V0Y29kZShwb3N0Y29kZSkgYXMgc3RyaW5nLFxyXG4gICAgICAgIGFyZWE6IHRvQXJlYShwb3N0Y29kZSkgYXMgc3RyaW5nLFxyXG4gICAgICAgIGRpc3RyaWN0OiB0b0Rpc3RyaWN0KHBvc3Rjb2RlKSBhcyBzdHJpbmcsXHJcbiAgICAgICAgc3ViRGlzdHJpY3Q6IHRvU3ViRGlzdHJpY3QocG9zdGNvZGUpLFxyXG4gICAgICAgIHNlY3RvcjogdG9TZWN0b3IocG9zdGNvZGUpIGFzIHN0cmluZyxcclxuICAgICAgICB1bml0OiB0b1VuaXQocG9zdGNvZGUpIGFzIHN0cmluZyxcclxuICAgIH07XHJcbn07XHJcblxyXG4vKipcclxuICogU2VhcmNoZXMgYSBib2R5IG9mIHRleHQgZm9yIHBvc3Rjb2RlIG1hdGNoZXNcclxuICpcclxuICogUmV0dXJucyBhbiBlbXB0eSBhcnJheSBpZiBubyBtYXRjaFxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKlxyXG4gKiBgYGBcclxuICogLy8gUmV0cmlldmUgdmFsaWQgcG9zdGNvZGVzIGluIGEgYm9keSBvZiB0ZXh0XHJcbiAqIGNvbnN0IG1hdGNoZXMgPSBtYXRjaChcIlRoZSBQTSBhbmQgaGVyIG5vLjIgbGl2ZSBhdCBTVzFBMmFhIGFuZCBTVzFBIDJBQlwiKTsgLy8gPT4gW1wiU1cxQTJhYVwiLCBcIlNXMUEgMkFCXCJdXHJcbiAqXHJcbiAqIC8vIFBlcmZvcm0gdHJhbnNmb3JtYXRpb25zIGxpa2Ugbm9ybWFsaXNhdGlvbiBwb3N0Y29kZXMgdXNpbmcgYC5tYXBgIGFuZCBgdG9Ob3JtYWxpc2VkYFxyXG4gKiBtYXRjaGVzLm1hcCh0b05vcm1hbGlzZWQpOyAvLyA9PiBbXCJTVzFBIDJBQVwiLCBcIlNXMUEgMkFCXCJdXHJcbiAqXHJcbiAqIC8vIE5vIG1hdGNoZXMgeWllbGRzIGVtcHR5IGFycmF5XHJcbiAqIG1hdGNoKFwiU29tZSBMb25kb24gb3V0d2FyZCBjb2RlcyBhcmUgU1cxQSwgTlcxIGFuZCBFMVwiKTsgLy8gPT4gW11cclxuICogYGBgXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgbWF0Y2ggPSAoY29ycHVzOiBzdHJpbmcpOiBzdHJpbmdbXSA9PlxyXG4gICAgY29ycHVzLm1hdGNoKFBPU1RDT0RFX0NPUlBVU19SRUdFWCkgfHwgW107XHJcblxyXG4vKipcclxuICogQGhpZGRlblxyXG4gKi9cclxuaW50ZXJmYWNlIFJlcGxhY2VSZXN1bHQge1xyXG4gICAgLyoqXHJcbiAgICAgKiBMaXN0IG9mIG1hdGNoaW5nIHBvc3Rjb2RlcyBmb3VuZCBpbnRleHRcclxuICAgICAqL1xyXG4gICAgbWF0Y2g6IHN0cmluZ1tdO1xyXG4gICAgLyoqXHJcbiAgICAgKiBCb2R5IG9mIHRleHQgd2l0aCBwb3N0Y29kZXMgcmVwbGFjZWQgKHdpdGggZW1wdHkgc3RyaW5nIGJ5IGRlZmF1bHQpXHJcbiAgICAgKi9cclxuICAgIHJlc3VsdDogc3RyaW5nO1xyXG59XHJcblxyXG4vKipcclxuICogUmVwbGFjZXMgcG9zdGNvZGVzIGluIGEgYm9keSBvZiB0ZXh0IHdpdGggYSBzdHJpbmdcclxuICpcclxuICogQnkgZGVmYXVsdCB0aGUgcmVwbGFjZW1lbnQgc3RyaW5nIGlzIGVtcHR5IHN0cmluZyBgXCJcImBcclxuICpcclxuICogQGV4YW1wbGVcclxuICpcclxuICogYGBgXHJcbiAqIC8vIFJlcGxhY2UgcG9zdGNvZGVzIGluIGEgYm9keSBvZiB0ZXh0XHJcbiAqIHJlcGxhY2UoXCJUaGUgUE0gYW5kIGhlciBuby4yIGxpdmUgYXQgU1cxQTJBQSBhbmQgU1cxQSAyQUJcIik7XHJcbiAqIC8vID0+IHsgbWF0Y2g6IFtcIlNXMUEyQUFcIiwgXCJTVzFBIDJBQlwiXSwgcmVzdWx0OiBcIlRoZSBQTSBhbmQgaGVyIG5vLjIgbGl2ZSBhdCAgYW5kIFwiIH1cclxuICpcclxuICogLy8gQWRkIGN1c3RvbSByZXBsYWNlbWVudFxyXG4gKiByZXBsYWNlKFwiVGhlIFBNIGxpdmVzIGF0IFNXMUEgMkFBXCIsIFwiRG93bmluZyBTdHJlZXRcIik7XHJcbiAqIC8vID0+IHsgbWF0Y2g6IFtcIlNXMUEgMkFBXCJdLCByZXN1bHQ6IFwiVGhlIFBNIGxpdmVzIGF0IERvd25pbmcgU3RyZWV0XCIgfTtcclxuICpcclxuICogLy8gTm8gbWF0Y2hcclxuICogcmVwbGFjZShcIlNvbWUgTG9uZG9uIG91dHdhcmQgY29kZXMgYXJlIFNXMUEsIE5XMSBhbmQgRTFcIik7XHJcbiAqIC8vID0+IHsgbWF0Y2g6IFtdLCByZXN1bHQ6IFwiU29tZSBMb25kb24gb3V0d2FyZCBjb2RlcyBhcmUgU1cxQSwgTlcxIGFuZCBFMVwiIH1cclxuICogYGBgXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgcmVwbGFjZSA9IChjb3JwdXM6IHN0cmluZywgcmVwbGFjZVdpdGggPSBcIlwiKTogUmVwbGFjZVJlc3VsdCA9PiAoe1xyXG4gICAgbWF0Y2g6IG1hdGNoKGNvcnB1cyksXHJcbiAgICByZXN1bHQ6IGNvcnB1cy5yZXBsYWNlKFBPU1RDT0RFX0NPUlBVU19SRUdFWCwgcmVwbGFjZVdpdGgpLFxyXG59KTtcclxuXHJcbmV4cG9ydCBjb25zdCBGSVhBQkxFX1JFR0VYID0gL15cXHMqW2EtejAxXXsxLDJ9WzAtOW9pXVthLXpcXGRdP1xccypbMC05b2ldW2EtejAxXXsyfVxccyokL2k7XHJcblxyXG4vKipcclxuICogQXR0ZW1wdHMgdG8gZml4IGFuZCBjbGVhbiBhIHBvc3Rjb2RlLiBTcGVjaWZpY2FsbHk6XHJcbiAqIC0gUGVyZm9ybXMgY2hhcmFjdGVyIGNvbnZlcnNpb24gb24gb2J2aW91c2x5IHdyb25nIGFuZCBjb21tb25seSBtaXhlZCB1cCBsZXR0ZXJzIChlLmcuIE8gPT4gMCBhbmQgdmljZSB2ZXJzYSlcclxuICogLSBUcmltcyBzdHJpbmdcclxuICogLSBQcm9wZXJseSBhZGRzIHNwYWNlIGJldHdlZW4gb3V0d2FyZCBhbmQgaW53YXJkIGNvZGVzXHJcbiAqXHJcbiAqIElmIHRoZSBwb3N0Y29kZSBjYW5ub3QgYmUgY29lcmNlZCBpbnRvIGEgdmFsaWQgZm9ybWF0LCB0aGUgb3JpZ2luYWwgc3RyaW5nIGlzIHJldHVybmVkXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogZml4KFwiIFNXMUEgIDJBT1wiKSA9PiBcIlNXMUEgMkFPXCIgLy8gUHJvcGVybHkgc3BhY2VzXHJcbiAqIGZpeChcIlNXMUEgMkEwXCIpID0+IFwiU1cxQSAyQU9cIiAvLyAwIGlzIGNvZXJjZWQgaW50byBcIjBcIlxyXG4gKiBgYGBcclxuICpcclxuICogQWltcyB0byBiZSB1c2VkIGluIGNvbmp1bmN0aW9uIHdpdGggcGFyc2UgdG8gbWFrZSBwb3N0Y29kZSBlbnRyeSBtb3JlIGZvcmdpdmluZzpcclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiBjb25zdCB7IGlud2FyZCB9ID0gcGFyc2UoZml4KFwiU1cxQSAyQTBcIikpOyAvLyBpbndhcmQgPSBcIjJBT1wiXHJcbiAqIGBgYFxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IGZpeCA9IChzOiBzdHJpbmcpOiBzdHJpbmcgPT4ge1xyXG4gICAgY29uc3QgbWF0Y2ggPSBzLm1hdGNoKEZJWEFCTEVfUkVHRVgpO1xyXG4gICAgaWYgKG1hdGNoID09PSBudWxsKSByZXR1cm4gcztcclxuICAgIHMgPSBzLnRvVXBwZXJDYXNlKCkudHJpbSgpLnJlcGxhY2UoL1xccysvZ2ksIFwiXCIpO1xyXG4gICAgY29uc3QgbCA9IHMubGVuZ3RoO1xyXG4gICAgY29uc3QgaW53YXJkID0gcy5zbGljZShsIC0gMywgbCk7XHJcbiAgICByZXR1cm4gYCR7Y29lcmNlT3V0Y29kZShzLnNsaWNlKDAsIGwgLSAzKSl9ICR7Y29lcmNlKFwiTkxMXCIsIGlud2FyZCl9YDtcclxufTtcclxuXHJcbmNvbnN0IHRvTGV0dGVyOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xyXG4gICAgXCIwXCI6IFwiT1wiLFxyXG4gICAgXCIxXCI6IFwiSVwiLFxyXG59O1xyXG5cclxuY29uc3QgdG9OdW1iZXI6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XHJcbiAgICBPOiBcIjBcIixcclxuICAgIEk6IFwiMVwiLFxyXG59O1xyXG5cclxuY29uc3QgY29lcmNlT3V0Y29kZSA9IChpOiBzdHJpbmcpOiBzdHJpbmcgPT4ge1xyXG4gICAgaWYgKGkubGVuZ3RoID09PSAyKSByZXR1cm4gY29lcmNlKFwiTE5cIiwgaSk7XHJcbiAgICBpZiAoaS5sZW5ndGggPT09IDMpIHJldHVybiBjb2VyY2UoXCJMPz9cIiwgaSk7XHJcbiAgICBpZiAoaS5sZW5ndGggPT09IDQpIHJldHVybiBjb2VyY2UoXCJMTE4/XCIsIGkpO1xyXG4gICAgcmV0dXJuIGk7XHJcbn07XHJcblxyXG4vKipcclxuICogR2l2ZW4gYSBwYXR0ZXJuIG9mIGxldHRlcnMsIG51bWJlcnMgYW5kIHVua25vd25zIHJlcHJlc2VudGVkIGFzIGEgc2VxdWVuY2VcclxuICogb2YgTCwgTnMgYW5kID8gcmVzcGVjdGl2ZWx5OyBjb2VyY2UgdGhlbSBpbnRvIHRoZSBjb3JyZWN0IHR5cGUgZ2l2ZW4gYVxyXG4gKiBtYXBwaW5nIG9mIHBvdGVudGlhbGx5IGNvbmZ1c2VkIGxldHRlcnNcclxuICpcclxuICogQGhpZGRlblxyXG4gKlxyXG4gKiBAZXhhbXBsZSBjb2VyY2UoXCJMTE5cIiwgXCIwTzhcIikgPT4gXCJPTzhcIlxyXG4gKi9cclxuY29uc3QgY29lcmNlID0gKHBhdHRlcm46IHN0cmluZywgaW5wdXQ6IHN0cmluZyk6IHN0cmluZyA9PlxyXG4gICAgaW5wdXRcclxuICAgICAgICAuc3BsaXQoXCJcIilcclxuICAgICAgICAucmVkdWNlPHN0cmluZ1tdPigoYWNjLCBjLCBpKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRhcmdldCA9IHBhdHRlcm4uY2hhckF0KGkpO1xyXG4gICAgICAgICAgICBpZiAodGFyZ2V0ID09PSBcIk5cIikgYWNjLnB1c2godG9OdW1iZXJbY10gfHwgYyk7XHJcbiAgICAgICAgICAgIGlmICh0YXJnZXQgPT09IFwiTFwiKSBhY2MucHVzaCh0b0xldHRlcltjXSB8fCBjKTtcclxuICAgICAgICAgICAgaWYgKHRhcmdldCA9PT0gXCI/XCIpIGFjYy5wdXNoKGMpO1xyXG4gICAgICAgICAgICByZXR1cm4gYWNjO1xyXG4gICAgICAgIH0sIFtdKVxyXG4gICAgICAgIC5qb2luKFwiXCIpOyJdfQ==\n","//todo: consent mode debugging/check: https://developers.google.com/tag-platform/devguides/consent-debugging\nimport { areAnalyticsAccepted } from './cookie-functions';\nimport { toOutcode } from './postcode';\nfunction gtag(command, ...args) {\n    window.dataLayer = window.dataLayer || [];\n    window.dataLayer.push(arguments);\n}\nlet GaMeasurementId = '';\n//todo: use prototype? (or class?)\n// (having an object (prototype/class) will ensure that GaMeasurementId will have already been set)\nexport default function initAnalytics(gaMeasurementId) {\n    // if the environment doesn't have a measurement id, don't load analytics\n    if (!Boolean(gaMeasurementId)) {\n        return;\n    }\n    GaMeasurementId = gaMeasurementId;\n    setDefaultConsent();\n    loadGaScript(gaMeasurementId);\n    gtag('js', new Date());\n    const pageViewParams = getPiiSafePageView(gaMeasurementId);\n    // set the config for auto generated events other than page_view\n    gtag('config', gaMeasurementId, {\n        send_page_view: false,\n        page_path: pageViewParams.page_path,\n        page_location: pageViewParams.page_location,\n        page_referrer: pageViewParams.referrer,\n        cookie_flags: 'secure'\n    });\n    if (areAnalyticsAccepted()) {\n        updateAnalyticsStorageConsent(true);\n    }\n    sendPageViewEvent();\n}\nfunction setDefaultConsent() {\n    gtag('consent', 'default', {\n        'analytics_storage': 'denied'\n    });\n    gtag('set', 'url_passthrough', true);\n}\nexport function updateAnalyticsStorageConsent(granted, delayMs) {\n    let options = {\n        'analytics_storage': granted ? 'granted' : 'denied'\n    };\n    if (typeof delayMs !== 'undefined') {\n        options['wait_for_update'] = delayMs;\n    }\n    gtag('consent', 'update', options);\n}\nexport function sendPageViewEvent() {\n    // send the page_view event manually (https://developers.google.com/analytics/devguides/collection/gtagjs/pages#default_behavior)\n    gtag('event', 'page_view', getPiiSafePageView(GaMeasurementId));\n}\nexport function sendAnalyticsCustomEvent(accepted, source) {\n    gtag('event', 'analytics', {\n        'accepted': accepted,\n        'source': source\n    });\n}\nfunction loadGaScript(gaMeasurementId) {\n    const f = document.getElementsByTagName('script')[0];\n    const j = document.createElement('script');\n    j.async = true;\n    j.src = 'https://www.googletagmanager.com/gtag/js?id=' + gaMeasurementId;\n    f.parentNode.insertBefore(j, f);\n}\nfunction getPiiSafePageView(gaMeasurementId) {\n    const pageView = {\n        page_title: document.title,\n        send_to: gaMeasurementId,\n        referrer: '',\n        page_location: '',\n        page_path: ''\n    };\n    //todo: set as referrer or page_referrer in pageView - does it matter? is it only picking it up from the config?\n    //todo: get piisafe referrer function\n    if (document.referrer !== '') {\n        const referrerUrl = new URL(document.referrer);\n        const piiSafeReferrerQueryString = getPiiSafeQueryString(referrerUrl.search);\n        if (piiSafeReferrerQueryString == null) {\n            pageView.referrer = document.referrer;\n        }\n        else {\n            const urlArray = document.referrer.split('?');\n            pageView.referrer = urlArray[0] + piiSafeReferrerQueryString;\n        }\n    }\n    const piiSafeQueryString = getPiiSafeQueryString(window.location.search);\n    if (piiSafeQueryString == null) {\n        pageView.page_location = window.location.href;\n        pageView.page_path = window.location.pathname + window.location.search;\n        return pageView;\n    }\n    const urlArray = window.location.href.split('?');\n    pageView.page_location = urlArray[0] + piiSafeQueryString;\n    pageView.page_path = window.location.pathname + piiSafeQueryString;\n    return pageView;\n}\nfunction getPiiSafeQueryString(queryString) {\n    //todo: for safety, convert to lowercase, so that if the user changes the case of the url, we still don't collect pii\n    const queryParams = new URLSearchParams(queryString);\n    let postcode = queryParams.get('postcode');\n    if (postcode == null) {\n        // null indicates original query params were already pii safe\n        return null;\n    }\n    postcode = toOutcode(postcode);\n    queryParams.set('postcode', postcode);\n    queryParams.delete('latitude');\n    queryParams.delete('longitude');\n    return '?' + queryParams.toString();\n}\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbXBvbmVudHMvYW5hbHl0aWNzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNBLDRHQUE0RztBQUM1RyxPQUFPLEVBQUUsb0JBQW9CLEVBQUUsTUFBTSxvQkFBb0IsQ0FBQTtBQUN6RCxPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0sWUFBWSxDQUFBO0FBRXRDLFNBQVMsSUFBSSxDQUFDLE9BQWUsRUFBRSxHQUFHLElBQVc7SUFDekMsTUFBTSxDQUFDLFNBQVMsR0FBRyxNQUFNLENBQUMsU0FBUyxJQUFJLEVBQUUsQ0FBQztJQUMxQyxNQUFNLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQztBQUNyQyxDQUFDO0FBRUQsSUFBSSxlQUFlLEdBQVcsRUFBRSxDQUFDO0FBRWpDLGtDQUFrQztBQUNsQyxtR0FBbUc7QUFDbkcsTUFBTSxDQUFDLE9BQU8sVUFBVSxhQUFhLENBQUMsZUFBdUI7SUFFekQseUVBQXlFO0lBQ3pFLElBQUksQ0FBQyxPQUFPLENBQUMsZUFBZSxDQUFDLEVBQUU7UUFDM0IsT0FBTztLQUNWO0lBRUQsZUFBZSxHQUFHLGVBQWUsQ0FBQztJQUVsQyxpQkFBaUIsRUFBRSxDQUFDO0lBRXBCLFlBQVksQ0FBQyxlQUFlLENBQUMsQ0FBQztJQUU5QixJQUFJLENBQUMsSUFBSSxFQUFFLElBQUksSUFBSSxFQUFFLENBQUMsQ0FBQztJQUV2QixNQUFNLGNBQWMsR0FBRyxrQkFBa0IsQ0FBQyxlQUFlLENBQUMsQ0FBQztJQUUzRCxnRUFBZ0U7SUFDaEUsSUFBSSxDQUFDLFFBQVEsRUFBRSxlQUFlLEVBQUU7UUFDNUIsY0FBYyxFQUFFLEtBQUs7UUFDckIsU0FBUyxFQUFFLGNBQWMsQ0FBQyxTQUFTO1FBQ25DLGFBQWEsRUFBRSxjQUFjLENBQUMsYUFBYTtRQUMzQyxhQUFhLEVBQUUsY0FBYyxDQUFDLFFBQVE7UUFDdEMsWUFBWSxFQUFFLFFBQVE7S0FDekIsQ0FBQyxDQUFDO0lBRUgsSUFBSSxvQkFBb0IsRUFBRSxF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ZW50IG1vZGUgZGVidWdnaW5nL2NoZWNrOiBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS90YWctcGxhdGZvcm0vZGV2Z3VpZGVzL2NvbnNlbnQtZGVidWdnaW5nXHJcbmltcG9ydCB7IGFyZUFuYWx5dGljc0FjY2VwdGVkIH0gZnJvbSAnLi9jb29raWUtZnVuY3Rpb25zJ1xyXG5pbXBvcnQgeyB0b091dGNvZGUgfSBmcm9tICcuL3Bvc3Rjb2RlJ1xyXG5cclxuZnVuY3Rpb24gZ3RhZyhjb21tYW5kOiBzdHJpbmcsIC4uLmFyZ3M6IGFueVtdKTogdm9pZCB7XHJcbiAgICB3aW5kb3cuZGF0YUxheWVyID0gd2luZG93LmRhdGFMYXllciB8fCBbXTtcclxuICAgIHdpbmRvdy5kYXRhTGF5ZXIucHVzaChhcmd1bWVudHMpO1xyXG59XHJcblxyXG5sZXQgR2FNZWFzdXJlbWVudElkOiBzdHJpbmcgPSAnJztcclxuXHJcbi8vdG9kbzogdXNlIHByb3RvdHlwZT8gKG9yIGNsYXNzPylcclxuLy8gKGhhdmluZyBhbiBvYmplY3QgKHByb3RvdHlwZS9jbGFzcykgd2lsbCBlbnN1cmUgdGhhdCBHYU1lYXN1cmVtZW50SWQgd2lsbCBoYXZlIGFscmVhZHkgYmVlbiBzZXQpXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGluaXRBbmFseXRpY3MoZ2FNZWFzdXJlbWVudElkOiBzdHJpbmcpIHtcclxuXHJcbiAgICAvLyBpZiB0aGUgZW52aXJvbm1lbnQgZG9lc24ndCBoYXZlIGEgbWVhc3VyZW1lbnQgaWQsIGRvbid0IGxvYWQgYW5hbHl0aWNzXHJcbiAgICBpZiAoIUJvb2xlYW4oZ2FNZWFzdXJlbWVudElkKSkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBHYU1lYXN1cmVtZW50SWQgPSBnYU1lYXN1cmVtZW50SWQ7XHJcblxyXG4gICAgc2V0RGVmYXVsdENvbnNlbnQoKTtcclxuXHJcbiAgICBsb2FkR2FTY3JpcHQoZ2FNZWFzdXJlbWVudElkKTtcclxuXHJcbiAgICBndGFnKCdqcycsIG5ldyBEYXRlKCkpO1xyXG5cclxuICAgIGNvbnN0IHBhZ2VWaWV3UGFyYW1zID0gZ2V0UGlpU2FmZVBhZ2VWaWV3KGdhTWVhc3VyZW1lbnRJZCk7XHJcblxyXG4gICAgLy8gc2V0IHRoZSBjb25maWcgZm9yIGF1dG8gZ2VuZXJhdGVkIGV2ZW50cyBvdGhlciB0aGFuIHBhZ2Vfdmlld1xyXG4gICAgZ3RhZygnY29uZmlnJywgZ2FNZWFzdXJlbWVudElkLCB7XHJcbiAgICAgICAgc2VuZF9wYWdlX3ZpZXc6IGZhbHNlLCAvL2Rpc2FibGUgYXV0byBwYWdlX3ZpZXcgbWVhc3VyZW1lbnRcclxuICAgICAgICBwYWdlX3BhdGg6IHBhZ2VWaWV3UGFyYW1zLnBhZ2VfcGF0aCxcclxuICAgICAgICBwYWdlX2xvY2F0aW9uOiBwYWdlVmlld1BhcmFtcy5wYWdlX2xvY2F0aW9uLFxyXG4gICAgICAgIHBhZ2VfcmVmZXJyZXI6IHBhZ2VWaWV3UGFyYW1zLnJlZmVycmVyLFxyXG4gICAgICAgIGNvb2tpZV9mbGFnczogJ3NlY3VyZSdcclxuICAgIH0pO1xyXG5cclxuICAgIGlmIChhcmVBbmFseXRpY3NBY2NlcHRlZCgpKSB7XHJcbiAgICAgICAgdXBkYXRlQW5hbHl0aWNzU3RvcmFnZUNvbnNlbnQodHJ1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgc2VuZFBhZ2VWaWV3RXZlbnQoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gc2V0RGVmYXVsdENvbnNlbnQoKSB7XHJcbiAgICBndGFnKCdjb25zZW50JywgJ2RlZmF1bHQnLCB7XHJcbiAgICAgICAgJ2FuYWx5dGljc19zdG9yYWdlJzogJ2RlbmllZCdcclxuICAgIH0pO1xyXG5cclxuICAgIGd0YWcoJ3NldCcsICd1cmxfcGFzc3Rocm91Z2gnLCB0cnVlKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZUFuYWx5dGljc1N0b3JhZ2VDb25zZW50KGdyYW50ZWQ6IGJvb2xlYW4sIGRlbGF5TXM/OiBudW1iZXIpIHtcclxuXHJcbiAgICBsZXQgb3B0aW9ucyA9IHtcclxuICAgICAgICAnYW5hbHl0aWNzX3N0b3JhZ2UnOiBncmFudGVkID8gJ2dyYW50ZWQnIDogJ2RlbmllZCdcclxuICAgIH07XHJcblxyXG4gICAgaWYgKHR5cGVvZiBkZWxheU1zICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIG9wdGlvbnNbJ3dhaXRfZm9yX3VwZGF0ZSddID0gZGVsYXlNcztcclxuICAgIH1cclxuXHJcbiAgICBndGFnKCdjb25zZW50JywgJ3VwZGF0ZScsIG9wdGlvbnMpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc2VuZFBhZ2VWaWV3RXZlbnQoKSB7XHJcbiAgICAvLyBzZW5kIHRoZSBwYWdlX3ZpZXcgZXZlbnQgbWFudWFsbHkgKGh0dHBzOi8vZGV2ZWxvcGVycy5nb29nbGUuY29tL2FuYWx5dGljcy9kZXZndWlkZXMvY29sbGVjdGlvbi9ndGFnanMvcGFnZXMjZGVmYXVsdF9iZWhhdmlvcilcclxuICAgIGd0YWcoJ2V2ZW50JywgJ3BhZ2VfdmlldycsIGdldFBpaVNhZmVQYWdlVmlldyhHYU1lYXN1cmVtZW50SWQpKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNlbmRBbmFseXRpY3NDdXN0b21FdmVudChhY2NlcHRlZDogYm9vbGVhbiwgc291cmNlOiBzdHJpbmcpIHtcclxuXHJcbiAgICBndGFnKCdldmVudCcsICdhbmFseXRpY3MnLCB7XHJcbiAgICAgICAgJ2FjY2VwdGVkJzogYWNjZXB0ZWQsXHJcbiAgICAgICAgJ3NvdXJjZSc6IHNvdXJjZVxyXG4gICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGxvYWRHYVNjcmlwdChnYU1lYXN1cmVtZW50SWQ6IHN0cmluZykge1xyXG4gICAgY29uc3QgZiA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdzY3JpcHQnKVswXTtcclxuICAgIGNvbnN0IGogPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcclxuICAgIGouYXN5bmMgPSB0cnVlO1xyXG4gICAgai5zcmMgPSAnaHR0cHM6Ly93d3cuZ29vZ2xldGFnbWFuYWdlci5jb20vZ3RhZy9qcz9pZD0nICsgZ2FNZWFzdXJlbWVudElkO1xyXG4gICAgZi5wYXJlbnROb2RlLmluc2VydEJlZm9yZShqLCBmKTtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0UGlpU2FmZVBhZ2VWaWV3KGdhTWVhc3VyZW1lbnRJZDogc3RyaW5nKSB7XHJcblxyXG4gICAgY29uc3QgcGFnZVZpZXcgPSB7XHJcbiAgICAgICAgcGFnZV90aXRsZTogZG9jdW1lbnQudGl0bGUsXHJcbiAgICAgICAgc2VuZF90bzogZ2FNZWFzdXJlbWVudElkLFxyXG4gICAgICAgIHJlZmVycmVyOiAnJyxcclxuICAgICAgICBwYWdlX2xvY2F0aW9uOiAnJyxcclxuICAgICAgICBwYWdlX3BhdGg6ICcnXHJcbiAgICB9O1xyXG5cclxuICAgIC8vdG9kbzogc2V0IGFzIHJlZmVycmVyIG9yIHBhZ2VfcmVmZXJyZXIgaW4gcGFnZVZpZXcgLSBkb2VzIGl0IG1hdHRlcj8gaXMgaXQgb25seSBwaWNraW5nIGl0IHVwIGZyb20gdGhlIGNvbmZpZz9cclxuICAgIC8vdG9kbzogZ2V0IHBpaXNhZmUgcmVmZXJyZXIgZnVuY3Rpb25cclxuICAgIGlmIChkb2N1bWVudC5yZWZlcnJlciAhPT0gJycpIHtcclxuICAgICAgICBjb25zdCByZWZlcnJlclVybCA9IG5ldyBVUkwoZG9jdW1lbnQucmVmZXJyZXIpO1xyXG4gICAgICAgIGNvbnN0IHBpaVNhZmVSZWZlcnJlclF1ZXJ5U3RyaW5nID0gZ2V0UGlpU2FmZVF1ZXJ5U3RyaW5nKHJlZmVycmVyVXJsLnNlYXJjaCk7XHJcbiAgICAgICAgaWYgKHBpaVNhZmVSZWZlcnJlclF1ZXJ5U3RyaW5nID09IG51bGwpIHtcclxuICAgICAgICAgICAgcGFnZVZpZXcucmVmZXJyZXIgPSBkb2N1bWVudC5yZWZlcnJlcjtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCB1cmxBcnJheSA9IGRvY3VtZW50LnJlZmVycmVyLnNwbGl0KCc/Jyk7XHJcblxyXG4gICAgICAgICAgICBwYWdlVmlldy5yZWZlcnJlciA9IHVybEFycmF5WzBdICsgcGlpU2FmZVJlZmVycmVyUXVlcnlTdHJpbmc7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHBpaVNhZmVRdWVyeVN0cmluZyA9IGdldFBpaVNhZmVRdWVyeVN0cmluZyh3aW5kb3cubG9jYXRpb24uc2VhcmNoKTtcclxuXHJcbiAgICBpZiAocGlpU2FmZVF1ZXJ5U3RyaW5nID09IG51bGwpIHtcclxuICAgICAgICBwYWdlVmlldy5wYWdlX2xvY2F0aW9uID0gd2luZG93LmxvY2F0aW9uLmhyZWY7XHJcbiAgICAgICAgcGFnZVZpZXcucGFnZV9wYXRoID0gd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lICsgd2luZG93LmxvY2F0aW9uLnNlYXJjaDtcclxuXHJcbiAgICAgICAgcmV0dXJuIHBhZ2VWaWV3O1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHVybEFycmF5ID0gd2luZG93LmxvY2F0aW9uLmhyZWYuc3BsaXQoJz8nKTtcclxuXHJcbiAgICBwYWdlVmlldy5wYWdlX2xvY2F0aW9uID0gdXJsQXJyYXlbMF0gKyBwaWlTYWZlUXVlcnlTdHJpbmc7XHJcbiAgICBwYWdlVmlldy5wYWdlX3BhdGggPSB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUgKyBwaWlTYWZlUXVlcnlTdHJpbmc7XHJcblxyXG4gICAgcmV0dXJuIHBhZ2VWaWV3O1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRQaWlTYWZlUXVlcnlTdHJpbmcocXVlcnlTdHJpbmc6IHN0cmluZyk6IHN0cmluZyB8IG51bGwge1xyXG5cclxuICAgIC8vdG9kbzogZm9yIHNhZmV0eSwgY29udmVydCB0byBsb3dlcmNhc2UsIHNvIHRoYXQgaWYgdGhlIHVzZXIgY2hhbmdlcyB0aGUgY2FzZSBvZiB0aGUgdXJsLCB3ZSBzdGlsbCBkb24ndCBjb2xsZWN0IHBpaVxyXG4gICAgY29uc3QgcXVlcnlQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHF1ZXJ5U3RyaW5nKTtcclxuXHJcbiAgICBsZXQgcG9zdGNvZGUgPSBxdWVyeVBhcmFtcy5nZXQoJ3Bvc3Rjb2RlJyk7XHJcbiAgICBpZiAocG9zdGNvZGUgPT0gbnVsbCkge1xyXG4gICAgICAgIC8vIG51bGwgaW5kaWNhdGVzIG9yaWdpbmFsIHF1ZXJ5IHBhcmFtcyB3ZXJlIGFscmVhZHkgcGlpIHNhZmVcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBwb3N0Y29kZSA9IHRvT3V0Y29kZShwb3N0Y29kZSk7XHJcbiAgICBxdWVyeVBhcmFtcy5zZXQoJ3Bvc3Rjb2RlJywgcG9zdGNvZGUpO1xyXG4gICAgcXVlcnlQYXJhbXMuZGVsZXRlKCdsYXRpdHVkZScpO1xyXG4gICAgcXVlcnlQYXJhbXMuZGVsZXRlKCdsb25naXR1ZGUnKTtcclxuXHJcbiAgICByZXR1cm4gJz8nICsgcXVlcnlQYXJhbXMudG9TdHJpbmcoKTtcclxufVxyXG4iXX0=\n","import { getCookie } from './cookie-functions';\nexport function cookiesBanner() {\n    let $cookiesBanner = $('.govuk-cookie-banner');\n    let $cookiesBannerMessage = $('.govuk-cookie-banner__message');\n    let $cookiesBannerConfirmation = $('.govuk-cookie-banner__confirmation');\n    let $cookiesBannerAccepted = $('.govuk-cookie-banner__confirmation-message__accepted');\n    let $cookiesBannerRejected = $('.govuk-cookie-banner__confirmation-message__rejected');\n    let date = new Date();\n    date.setTime(date.getTime() + 24 * 60 * 60 * 1000 * 365);\n    let cookiesAccept = function () {\n        document.cookie = `service_directory_cookies_policy=accept; expires=date; path=/`;\n        $cookiesBannerMessage.addClass('govuk-hidden');\n        $cookiesBannerConfirmation.removeClass('govuk-hidden');\n        $cookiesBannerAccepted.removeClass('govuk-hidden');\n        $('#cookies-page-accepted').prop('checked', true);\n    };\n    let cookiesReject = function () {\n        deleteCookies();\n        document.cookie = `service_directory_cookies_policy=reject; expires=date; path=/`;\n        $cookiesBannerMessage.addClass('govuk-hidden');\n        $cookiesBannerConfirmation.removeClass('govuk-hidden');\n        $cookiesBannerRejected.removeClass('govuk-hidden');\n        $('#cookies-page-rejected').prop('checked', true);\n    };\n    let deleteCookies = function () {\n        let cookies = document.cookie.split(\";\");\n        for (let i = 0; i < cookies.length; i++) {\n            let equals = cookies[i].indexOf(\"=\");\n            let name = equals > -1 ? cookies[i].substr(0, equals) : cookies[i];\n            document.cookie = name + \"=;expires=Thu, 01 Jan 1970 00:00:00 GMT\";\n        }\n    };\n    let cookie_value = getCookie('service_directory_cookies_policy');\n    if (typeof cookie_value === 'undefined') {\n        $cookiesBanner.removeClass('govuk-hidden');\n        $('#cookies-banner-accept').click(function () {\n            cookiesAccept();\n        });\n        $('#cookies-banner-reject').click(function () {\n            cookiesReject();\n        });\n        $('#cookies-banner-close').click(function () {\n            $cookiesBanner.addClass('govuk-hidden');\n        });\n    }\n    else if (cookie_value === 'accept') {\n        $('#cookies-page-accepted').prop('checked', true);\n    }\n    else if (cookie_value === 'reject') {\n        $('#cookies-page-rejected').prop('checked', true);\n    }\n    $('#cookies-page-save').click(function () {\n        if ($('#cookies-page-accepted').is(':checked')) {\n            cookiesAccept();\n            $('#cookies-saved-notification').removeClass('govuk-hidden');\n            $('html, body').animate({ scrollTop: 0 }, 'fast');\n        }\n        if ($('#cookies-page-rejected').is(':checked')) {\n            cookiesReject();\n            $('#cookies-saved-notification').removeClass('govuk-hidden');\n            $('html, body').animate({ scrollTop: 0 }, 'fast');\n        }\n    });\n}\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbXBvbmVudHMvY29va2llLWJhbm5lci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0sb0JBQW9CLENBQUM7QUFFL0MsTUFBTSxVQUFVLGFBQWE7SUFDNUIsSUFBSSxjQUFjLEdBQUcsQ0FBQyxDQUFDLHNCQUFzQixDQUFDLENBQUM7SUFDL0MsSUFBSSxxQkFBcUIsR0FBRyxDQUFDLENBQUMsK0JBQStCLENBQUMsQ0FBQztJQUMvRCxJQUFJLDBCQUEwQixHQUFHLENBQUMsQ0FBQyxvQ0FBb0MsQ0FBQyxDQUFDO0lBQ3pFLElBQUksc0JBQXNCLEdBQUcsQ0FBQyxDQUFDLHNEQUFzRCxDQUFDLENBQUM7SUFDdkYsSUFBSSxzQkFBc0IsR0FBRyxDQUFDLENBQUMsc0RBQXNELENBQUMsQ0FBQztJQUN2RixJQUFJLElBQUksR0FBRyxJQUFJLElBQUksRUFBRSxDQUFDO0lBRXRCLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLElBQUksR0FBRyxHQUFHLENBQUMsQ0FBQztJQUV6RCxJQUFJLGFBQWEsR0FBRztRQUNuQixRQUFRLENBQUMsTUFBTSxHQUFHLCtEQUErRCxDQUFDO1FBRWxGLHFCQUFxQixDQUFDLFFBQVEsQ0FBQyxjQUFjLENBQUMsQ0FBQztRQUMvQywwQkFBMEIsQ0FBQyxXQUFXLENBQUMsY0FBYyxDQUFDLENBQUM7UUFDdkQsc0JBQXNCLENBQUMsV0FBVyxDQUFDLGNBQWMsQ0FBQyxDQUFDO1FBQ25ELENBQUMsQ0FBQyx3QkFBd0IsQ0FBQyxDQUFDLElBQUksQ0FBQyxTQUFTLEVBQUUsSUFBSSxDQUFDLENBQUM7SUFDbkQsQ0FBQyxDQUFBO0lBRUQsSUFBSSxhQUFhLEdBQUc7UUFDbkIsYUFBYSxFQUFFLENBQUM7UUFDaEIsUUFBUSxDQUFDLE1BQU0sR0FBRywrREFBK0QsQ0FBQztRQUVsRixxQkFBcUIs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SixDQUFDIiwiZmlsZSI6ImNvbXBvbmVudHMvY29va2llLWJhbm5lci5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldENvb2tpZSB9IGZyb20gJy4vY29va2llLWZ1bmN0aW9ucyc7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY29va2llc0Jhbm5lcigpIHtcclxuXHRsZXQgJGNvb2tpZXNCYW5uZXIgPSAkKCcuZ292dWstY29va2llLWJhbm5lcicpO1xyXG5cdGxldCAkY29va2llc0Jhbm5lck1lc3NhZ2UgPSAkKCcuZ292dWstY29va2llLWJhbm5lcl9fbWVzc2FnZScpO1xyXG5cdGxldCAkY29va2llc0Jhbm5lckNvbmZpcm1hdGlvbiA9ICQoJy5nb3Z1ay1jb29raWUtYmFubmVyX19jb25maXJtYXRpb24nKTtcclxuXHRsZXQgJGNvb2tpZXNCYW5uZXJBY2NlcHRlZCA9ICQoJy5nb3Z1ay1jb29raWUtYmFubmVyX19jb25maXJtYXRpb24tbWVzc2FnZV9fYWNjZXB0ZWQnKTtcclxuXHRsZXQgJGNvb2tpZXNCYW5uZXJSZWplY3RlZCA9ICQoJy5nb3Z1ay1jb29raWUtYmFubmVyX19jb25maXJtYXRpb24tbWVzc2FnZV9fcmVqZWN0ZWQnKTtcclxuXHRsZXQgZGF0ZSA9IG5ldyBEYXRlKCk7XHJcblxyXG5cdGRhdGUuc2V0VGltZShkYXRlLmdldFRpbWUoKSArIDI0ICogNjAgKiA2MCAqIDEwMDAgKiAzNjUpO1xyXG5cclxuXHRsZXQgY29va2llc0FjY2VwdCA9IGZ1bmN0aW9uICgpIHtcclxuXHRcdGRvY3VtZW50LmNvb2tpZSA9IGBzZXJ2aWNlX2RpcmVjdG9yeV9jb29raWVzX3BvbGljeT1hY2NlcHQ7IGV4cGlyZXM9ZGF0ZTsgcGF0aD0vYDtcclxuXHJcblx0XHQkY29va2llc0Jhbm5lck1lc3NhZ2UuYWRkQ2xhc3MoJ2dvdnVrLWhpZGRlbicpO1xyXG5cdFx0JGNvb2tpZXNCYW5uZXJDb25maXJtYXRpb24ucmVtb3ZlQ2xhc3MoJ2dvdnVrLWhpZGRlbicpO1xyXG5cdFx0JGNvb2tpZXNCYW5uZXJBY2NlcHRlZC5yZW1vdmVDbGFzcygnZ292dWstaGlkZGVuJyk7XHJcblx0XHQkKCcjY29va2llcy1wYWdlLWFjY2VwdGVkJykucHJvcCgnY2hlY2tlZCcsIHRydWUpO1xyXG5cdH1cclxuXHJcblx0bGV0IGNvb2tpZXNSZWplY3QgPSBmdW5jdGlvbiAoKSB7XHJcblx0XHRkZWxldGVDb29raWVzKCk7XHJcblx0XHRkb2N1bWVudC5jb29raWUgPSBgc2VydmljZV9kaXJlY3RvcnlfY29va2llc19wb2xpY3k9cmVqZWN0OyBleHBpcmVzPWRhdGU7IHBhdGg9L2A7XHJcblxyXG5cdFx0JGNvb2tpZXNCYW5uZXJNZXNzYWdlLmFkZENsYXNzKCdnb3Z1ay1oaWRkZW4nKTtcclxuXHRcdCRjb29raWVzQmFubmVyQ29uZmlybWF0aW9uLnJlbW92ZUNsYXNzKCdnb3Z1ay1oaWRkZW4nKTtcclxuXHRcdCRjb29raWVzQmFubmVyUmVqZWN0ZWQucmVtb3ZlQ2xhc3MoJ2dvdnVrLWhpZGRlbicpO1xyXG5cdFx0JCgnI2Nvb2tpZXMtcGFnZS1yZWplY3RlZCcpLnByb3AoJ2NoZWNrZWQnLCB0cnVlKTtcclxuXHR9XHJcblxyXG5cdGxldCBkZWxldGVDb29raWVzID0gZnVuY3Rpb24gKCkge1xyXG5cdFx0bGV0IGNvb2tpZXMgPSBkb2N1bWVudC5jb29raWUuc3BsaXQoXCI7XCIpO1xyXG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBjb29raWVzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdGxldCBlcXVhbHMgPSBjb29raWVzW2ldLmluZGV4T2YoXCI9XCIpO1xyXG5cdFx0XHRsZXQgbmFtZSA9IGVxdWFscyA+IC0xID8gY29va2llc1tpXS5zdWJzdHIoMCwgZXF1YWxzKSA6IGNvb2tpZXNbaV07XHJcblx0XHRcdGRvY3VtZW50LmNvb2tpZSA9IG5hbWUgKyBcIj07ZXhwaXJlcz1UaHUsIDAxIEphbiAxOTcwIDAwOjAwOjAwIEdNVFwiO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0bGV0IGNvb2tpZV92YWx1ZSA9IGdldENvb2tpZSgnc2VydmljZV9kaXJlY3RvcnlfY29va2llc19wb2xpY3knKTtcclxuXHJcblx0aWYgKHR5cGVvZiBjb29raWVfdmFsdWUgPT09ICd1bmRlZmluZWQnKSB7XHJcblx0XHQkY29va2llc0Jhbm5lci5yZW1vdmVDbGFzcygnZ292dWstaGlkZGVuJyk7XHJcblxyXG5cdFx0JCgnI2Nvb2tpZXMtYmFubmVyLWFjY2VwdCcpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0Y29va2llc0FjY2VwdCgpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0JCgnI2Nvb2tpZXMtYmFubmVyLXJlamVjdCcpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0Y29va2llc1JlamVjdCgpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0JCgnI2Nvb2tpZXMtYmFubmVyLWNsb3NlJykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG5cdFx0XHQkY29va2llc0Jhbm5lci5hZGRDbGFzcygnZ292dWstaGlkZGVuJyk7XHJcblx0XHR9KTtcclxuXHR9IGVsc2UgaWYgKGNvb2tpZV92YWx1ZSA9PT0gJ2FjY2VwdCcpIHtcclxuXHRcdCQoJyNjb29raWVzLXBhZ2UtYWNjZXB0ZWQnKS5wcm9wKCdjaGVja2VkJywgdHJ1ZSk7XHJcblx0fSBlbHNlIGlmIChjb29raWVfdmFsdWUgPT09ICdyZWplY3QnKSB7XHJcblx0XHQkKCcjY29va2llcy1wYWdlLXJlamVjdGVkJykucHJvcCgnY2hlY2tlZCcsIHRydWUpO1xyXG5cdH1cclxuXHJcblx0JCgnI2Nvb2tpZXMtcGFnZS1zYXZlJykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG5cdFx0aWYgKCQoJyNjb29raWVzLXBhZ2UtYWNjZXB0ZWQnKS5pcygnOmNoZWNrZWQnKSkge1xyXG5cdFx0XHRjb29raWVzQWNjZXB0KCk7XHJcblx0XHRcdCQoJyNjb29raWVzLXNhdmVkLW5vdGlmaWNhdGlvbicpLnJlbW92ZUNsYXNzKCdnb3Z1ay1oaWRkZW4nKTtcclxuXHRcdFx0JCgnaHRtbCwgYm9keScpLmFuaW1hdGUoeyBzY3JvbGxUb3A6IDAgfSwgJ2Zhc3QnKTtcclxuXHRcdH1cclxuXHRcdGlmICgkKCcjY29va2llcy1wYWdlLXJlamVjdGVkJykuaXMoJzpjaGVja2VkJykpIHtcclxuXHRcdFx0Y29va2llc1JlamVjdCgpO1xyXG5cdFx0XHQkKCcjY29va2llcy1zYXZlZC1ub3RpZmljYXRpb24nKS5yZW1vdmVDbGFzcygnZ292dWstaGlkZGVuJyk7XHJcblx0XHRcdCQoJ2h0bWwsIGJvZHknKS5hbmltYXRlKHsgc2Nyb2xsVG9wOiAwIH0sICdmYXN0Jyk7XHJcblx0XHR9XHJcblx0fSk7XHJcbn0iXX0=\n","import initAnalytics from './components/analytics';\nimport { cookiesBanner } from './components/cookie-banner';\ninitAnalytics(window.GA_MEASUREMENT_ID);\n(function ($) {\n    'use strict';\n    function fhgov() {\n        this.init = function () {\n            showHideFilters();\n            cookiesBanner();\n        };\n        let showHideFilters = function () {\n            $('.js-show-hide-filters').click(function (evt) {\n                evt.preventDefault();\n                $('.filters-component').toggleClass('app-results-filter-overlay');\n                $('body').toggleClass('app-results-filter-overlay-active');\n            });\n        };\n    }\n    window.fhgov = new fhgov();\n})(jQuery);\n//todo: move into $(document).ready()?\nwindow.fhgov.init();\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFXQSxPQUFPLGFBQWEsTUFBTSx3QkFBd0IsQ0FBQztBQUNuRCxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0sNEJBQTRCLENBQUM7QUFFM0QsYUFBYSxDQUFDLE1BQU0sQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO0FBRXhDLENBQUMsVUFBVSxDQUFDO0lBQ1gsWUFBWSxDQUFDO0lBQ2IsU0FBUyxLQUFLO1FBQ2IsSUFBSSxDQUFDLElBQUksR0FBRztZQUNYLGVBQWUsRUFBRSxDQUFDO1lBQ2xCLGFBQWEsRUFBRSxDQUFDO1FBQ2pCLENBQUMsQ0FBQztRQUVGLElBQUksZUFBZSxHQUFHO1lBQ3JCLENBQUMsQ0FBQyx1QkFBdUIsQ0FBQyxDQUFDLEtBQUssQ0FBQyxVQUFVLEdBQUc7Z0JBQzdDLEdBQUcsQ0FBQyxjQUFjLEVBQUUsQ0FBQztnQkFFckIsQ0FBQyxDQUFDLG9CQUFvQixDQUFDLENBQUMsV0FBVyxDQUFDLDRCQUE0QixDQUFDLENBQUM7Z0JBQ2xFLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxXQUFXLENBQUMsbUNBQW1DLENBQUMsQ0FBQztZQUM1RCxDQUFDLENBQUMsQ0FBQztRQUNKLENBQUMsQ0FBQTtJQUVGLENBQUM7SUFFRCxNQUFNLENBQUMsS0FBSyxHQUFHLElBQUksS0FBSyxFQUFFLENBQUM7QUFDNUIsQ0FBQyxDQUNBLENBQUMsTUFBTSxDQUFDLENBQUM7QUFFVixzQ0FBc0M7QUFDdEMsTUFBTSxDQUFDLEtBQUssQ0FBQyxJQUFJLEVBQUUsQ0FBQyIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgeyB9O1xyXG5cclxuZGVjbGFyZSBnbG9iYWwge1xyXG4gICAgaW50ZXJmYWNlIFdpbmRvdyB7XHJcbiAgICAgICAgZmhnb3Y6IGFueTtcclxuICAgICAgICBHQV9NRUFTVVJFTUVOVF9JRDogc3RyaW5nO1xyXG4gICAgICAgIEdBX0NPTlRBSU5FUl9JRDogc3RyaW5nO1xyXG4gICAgICAgIGRhdGFMYXllcjogYW55W107XHJcbiAgICB9XHJcbn1cclxuXHJcbmltcG9ydCBpbml0QW5hbHl0aWNzIGZyb20gJy4vY29tcG9uZW50cy9hbmFseXRpY3MnO1xyXG5pbXBvcnQgeyBjb29raWVzQmFubmVyIH0gZnJvbSAnLi9jb21wb25lbnRzL2Nvb2tpZS1iYW5uZXInO1xyXG5cclxuaW5pdEFuYWx5dGljcyh3aW5kb3cuR0FfTUVBU1VSRU1FTlRfSUQpO1xyXG5cclxuKGZ1bmN0aW9uICgkKSB7XHJcblx0J3VzZSBzdHJpY3QnO1xyXG5cdGZ1bmN0aW9uIGZoZ292KCkge1xyXG5cdFx0dGhpcy5pbml0ID0gZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRzaG93SGlkZUZpbHRlcnMoKTtcclxuXHRcdFx0Y29va2llc0Jhbm5lcigpO1xyXG5cdFx0fTtcclxuXHJcblx0XHRsZXQgc2hvd0hpZGVGaWx0ZXJzID0gZnVuY3Rpb24gKCkge1xyXG5cdFx0XHQkKCcuanMtc2hvdy1oaWRlLWZpbHRlcnMnKS5jbGljayhmdW5jdGlvbiAoZXZ0KSB7XHJcblx0XHRcdFx0ZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG5cdFx0XHRcdCQoJy5maWx0ZXJzLWNvbXBvbmVudCcpLnRvZ2dsZUNsYXNzKCdhcHAtcmVzdWx0cy1maWx0ZXItb3ZlcmxheScpO1xyXG5cdFx0XHRcdCQoJ2JvZHknKS50b2dnbGVDbGFzcygnYXBwLXJlc3VsdHMtZmlsdGVyLW92ZXJsYXktYWN0aXZlJyk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cclxuXHR9XHJcblxyXG5cdHdpbmRvdy5maGdvdiA9IG5ldyBmaGdvdigpO1xyXG59XHJcbikoalF1ZXJ5KTtcclxuXHJcbi8vdG9kbzogbW92ZSBpbnRvICQoZG9jdW1lbnQpLnJlYWR5KCk/XHJcbndpbmRvdy5maGdvdi5pbml0KCk7Il19\n"]}