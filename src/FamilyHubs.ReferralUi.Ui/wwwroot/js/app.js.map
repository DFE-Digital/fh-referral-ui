{"version":3,"sources":["tmp/js/components/postcode.js","tmp/js/components/analytics.js","tmp/js/app.js"],"names":["INCODE_REGEX","POSTCODE_REGEX","SPACE_REGEX","sanitize","s","replace","toUpperCase","isValid","postcode","match","toOutcode","gtag","command","args","window","dataLayer","push","arguments","GaMeasurementId","initAnalytics","gaMeasurementId","Boolean","setDefaultConsent","loadGaScript","Date","pageViewParams","getPiiSafePageView","send_page_view","page_path","page_location","page_referrer","referrer","cookie_flags","sendPageViewEvent","analytics_storage","f","document","getElementsByTagName","j","createElement","async","src","parentNode","insertBefore","pageView","page_title","title","send_to","piiSafeReferrerQueryString","getPiiSafeQueryString","URL","search","urlArray","split","piiSafeQueryString","location","href","pathname","queryString","queryParams","URLSearchParams","get","set","delete","toString","GA_MEASUREMENT_ID","$","fhgov","this","init","showHideFilters","cookiesBanner","click","evt","preventDefault","toggleClass","$cookiesBanner","$cookiesBannerMessage","$cookiesBannerConfirmation","$cookiesBannerAccepted","$cookiesBannerRejected","date","setTime","getTime","cookiesAccept","cookie","addClass","removeClass","prop","cookiesReject","deleteCookies","cookies","i","length","equals","indexOf","name","substr","cookie_value","cookieArr","cookiePair","trim","decodeURIComponent","getCookie","is","animate","scrollTop","jQuery"],"mappings":"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","file":"app.js","sourcesContent":["// from https://github.com/ideal-postcodes/postcode\n/**\n * @hidden\n */\nexport const DISTRICT_SPLIT_REGEX = /^([a-z]{1,2}\\d)([a-z])$/i;\n/**\n * Tests for the unit section of a postcode\n */\nexport const UNIT_REGEX = /[a-z]{2}$/i;\n/**\n * Tests for the inward code section of a postcode\n */\nexport const INCODE_REGEX = /\\d[a-z]{2}$/i;\n/**\n * Tests for the outward code section of a postcode\n */\nexport const OUTCODE_REGEX = /^[a-z]{1,2}\\d[a-z\\d]?$/i;\n/**\n * Tests for a valid postcode\n */\nexport const POSTCODE_REGEX = /^[a-z]{1,2}\\d[a-z\\d]?\\s*\\d[a-z]{2}$/i;\n/**\n * Test for a valid postcode embedded in text\n */\nexport const POSTCODE_CORPUS_REGEX = /[a-z]{1,2}\\d[a-z\\d]?\\s*\\d[a-z]{2}/gi;\n/**\n * Tests for the area section of a postcode\n */\nexport const AREA_REGEX = /^[a-z]{1,2}/i;\n/**\n * Invalid postcode prototype\n * @hidden\n */\nconst invalidPostcode = {\n    valid: false,\n    postcode: null,\n    incode: null,\n    outcode: null,\n    area: null,\n    district: null,\n    subDistrict: null,\n    sector: null,\n    unit: null,\n};\n/**\n * Return first elem of input is RegExpMatchArray or null if input null\n * @hidden\n */\nconst firstOrNull = (match) => {\n    if (match === null)\n        return null;\n    return match[0];\n};\nconst SPACE_REGEX = /\\s+/gi;\n/**\n * Drop all spaces and uppercase\n * @hidden\n */\nconst sanitize = (s) => s.replace(SPACE_REGEX, \"\").toUpperCase();\n/**\n * Sanitizes string and returns regex matches\n * @hidden\n */\nconst matchOn = (s, regex) => sanitize(s).match(regex);\n/**\n * Detects a \"valid\" postcode\n * - Starts and ends on a non-space character\n * - Any length of intervening space is allowed\n * - Must conform to one of following schemas:\n *  - AA1A 1AA\n *  - A1A 1AA\n *  - A1 1AA\n *  - A99 9AA\n *  - AA9 9AA\n *  - AA99 9AA\n */\nexport const isValid = (postcode) => postcode.match(POSTCODE_REGEX) !== null;\n/**\n * Returns true if string is a valid outcode\n */\nexport const validOutcode = (outcode) => outcode.match(OUTCODE_REGEX) !== null;\n/**\n * Returns a normalised postcode string (i.e. uppercased and properly spaced)\n *\n * Returns null if invalid postcode\n */\nexport const toNormalised = (postcode) => {\n    const outcode = toOutcode(postcode);\n    if (outcode === null)\n        return null;\n    const incode = toIncode(postcode);\n    if (incode === null)\n        return null;\n    return `${outcode} ${incode}`;\n};\n/**\n * Returns a correctly formatted outcode given a postcode\n *\n * Returns null if invalid postcode\n */\nexport const toOutcode = (postcode) => {\n    if (!isValid(postcode))\n        return null;\n    return sanitize(postcode).replace(INCODE_REGEX, \"\");\n};\n/**\n * Returns a correctly formatted incode given a postcode\n *\n * Returns null if invalid postcode\n */\nexport const toIncode = (postcode) => {\n    if (!isValid(postcode))\n        return null;\n    const match = matchOn(postcode, INCODE_REGEX);\n    return firstOrNull(match);\n};\n/**\n * Returns a correctly formatted area given a postcode\n *\n * Returns null if invalid postcode\n */\nexport const toArea = (postcode) => {\n    if (!isValid(postcode))\n        return null;\n    const match = matchOn(postcode, AREA_REGEX);\n    return firstOrNull(match);\n};\n/**\n * Returns a correctly formatted sector given a postcode\n *\n * Returns null if invalid postcode\n */\nexport const toSector = (postcode) => {\n    const outcode = toOutcode(postcode);\n    if (outcode === null)\n        return null;\n    const incode = toIncode(postcode);\n    if (incode === null)\n        return null;\n    return `${outcode} ${incode[0]}`;\n};\n/**\n * Returns a correctly formatted unit given a postcode\n *\n * Returns null if invalid postcode\n */\nexport const toUnit = (postcode) => {\n    if (!isValid(postcode))\n        return null;\n    const match = matchOn(postcode, UNIT_REGEX);\n    return firstOrNull(match);\n};\n/**\n * Returns a correctly formatted district given a postcode\n *\n * Returns null if invalid postcode\n *\n * @example\n *\n * ```\n * toDistrict(\"AA9 9AA\") // => \"AA9\"\n * toDistrict(\"A9A 9AA\") // => \"A9\"\n * ```\n */\nexport const toDistrict = (postcode) => {\n    const outcode = toOutcode(postcode);\n    if (outcode === null)\n        return null;\n    const match = outcode.match(DISTRICT_SPLIT_REGEX);\n    if (match === null)\n        return outcode;\n    return match[1];\n};\n/**\n * Returns a correctly formatted subdistrict given a postcode\n *\n * Returns null if no subdistrict is available on valid postcode\n * Returns null if invalid postcode\n *\n * @example\n *\n * ```\n * toSubDistrict(\"AA9A 9AA\") // => \"AA9A\"\n * toSubDistrict(\"A9A 9AA\") // => \"A9A\"\n * toSubDistrict(\"AA9 9AA\") // => null\n * toSubDistrict(\"A9 9AA\") // => null\n * ```\n */\nexport const toSubDistrict = (postcode) => {\n    const outcode = toOutcode(postcode);\n    if (outcode === null)\n        return null;\n    const split = outcode.match(DISTRICT_SPLIT_REGEX);\n    if (split === null)\n        return null;\n    return outcode;\n};\n/**\n * Returns a ValidPostcode or InvalidPostcode object from a postcode string\n *\n * @example\n *\n * ```\n * import { parse } from \"postcode\";\n *\n * const {\n * postcode,    // => \"SW1A 2AA\"\n * outcode,     // => \"SW1A\"\n * incode,      // => \"2AA\"\n * area,        // => \"SW\"\n * district,    // => \"SW1\"\n * unit,        // => \"AA\"\n * sector,      // => \"SW1A 2\"\n * subDistrict, // => \"SW1A\"\n * valid,       // => true\n * } = parse(\"Sw1A     2aa\");\n *\n * const {\n * postcode,    // => null\n * outcode,     // => null\n * incode,      // => null\n * area,        // => null\n * district,    // => null\n * unit,        // => null\n * sector,      // => null\n * subDistrict, // => null\n * valid,       // => false\n * } = parse(\"    Oh no, ):   \");\n * ```\n */\nexport const parse = (postcode) => {\n    if (!isValid(postcode))\n        return Object.assign({}, invalidPostcode);\n    return {\n        valid: true,\n        postcode: toNormalised(postcode),\n        incode: toIncode(postcode),\n        outcode: toOutcode(postcode),\n        area: toArea(postcode),\n        district: toDistrict(postcode),\n        subDistrict: toSubDistrict(postcode),\n        sector: toSector(postcode),\n        unit: toUnit(postcode),\n    };\n};\n/**\n * Searches a body of text for postcode matches\n *\n * Returns an empty array if no match\n *\n * @example\n *\n * ```\n * // Retrieve valid postcodes in a body of text\n * const matches = match(\"The PM and her no.2 live at SW1A2aa and SW1A 2AB\"); // => [\"SW1A2aa\", \"SW1A 2AB\"]\n *\n * // Perform transformations like normalisation postcodes using `.map` and `toNormalised`\n * matches.map(toNormalised); // => [\"SW1A 2AA\", \"SW1A 2AB\"]\n *\n * // No matches yields empty array\n * match(\"Some London outward codes are SW1A, NW1 and E1\"); // => []\n * ```\n */\nexport const match = (corpus) => corpus.match(POSTCODE_CORPUS_REGEX) || [];\n/**\n * Replaces postcodes in a body of text with a string\n *\n * By default the replacement string is empty string `\"\"`\n *\n * @example\n *\n * ```\n * // Replace postcodes in a body of text\n * replace(\"The PM and her no.2 live at SW1A2AA and SW1A 2AB\");\n * // => { match: [\"SW1A2AA\", \"SW1A 2AB\"], result: \"The PM and her no.2 live at  and \" }\n *\n * // Add custom replacement\n * replace(\"The PM lives at SW1A 2AA\", \"Downing Street\");\n * // => { match: [\"SW1A 2AA\"], result: \"The PM lives at Downing Street\" };\n *\n * // No match\n * replace(\"Some London outward codes are SW1A, NW1 and E1\");\n * // => { match: [], result: \"Some London outward codes are SW1A, NW1 and E1\" }\n * ```\n */\nexport const replace = (corpus, replaceWith = \"\") => ({\n    match: match(corpus),\n    result: corpus.replace(POSTCODE_CORPUS_REGEX, replaceWith),\n});\nexport const FIXABLE_REGEX = /^\\s*[a-z01]{1,2}[0-9oi][a-z\\d]?\\s*[0-9oi][a-z01]{2}\\s*$/i;\n/**\n * Attempts to fix and clean a postcode. Specifically:\n * - Performs character conversion on obviously wrong and commonly mixed up letters (e.g. O => 0 and vice versa)\n * - Trims string\n * - Properly adds space between outward and inward codes\n *\n * If the postcode cannot be coerced into a valid format, the original string is returned\n *\n * @example\n * ```javascript\n * fix(\" SW1A  2AO\") => \"SW1A 2AO\" // Properly spaces\n * fix(\"SW1A 2A0\") => \"SW1A 2AO\" // 0 is coerced into \"0\"\n * ```\n *\n * Aims to be used in conjunction with parse to make postcode entry more forgiving:\n *\n * @example\n * ```javascript\n * const { inward } = parse(fix(\"SW1A 2A0\")); // inward = \"2AO\"\n * ```\n */\nexport const fix = (s) => {\n    const match = s.match(FIXABLE_REGEX);\n    if (match === null)\n        return s;\n    s = s.toUpperCase().trim().replace(/\\s+/gi, \"\");\n    const l = s.length;\n    const inward = s.slice(l - 3, l);\n    return `${coerceOutcode(s.slice(0, l - 3))} ${coerce(\"NLL\", inward)}`;\n};\nconst toLetter = {\n    \"0\": \"O\",\n    \"1\": \"I\",\n};\nconst toNumber = {\n    O: \"0\",\n    I: \"1\",\n};\nconst coerceOutcode = (i) => {\n    if (i.length === 2)\n        return coerce(\"LN\", i);\n    if (i.length === 3)\n        return coerce(\"L??\", i);\n    if (i.length === 4)\n        return coerce(\"LLN?\", i);\n    return i;\n};\n/**\n * Given a pattern of letters, numbers and unknowns represented as a sequence\n * of L, Ns and ? respectively; coerce them into the correct type given a\n * mapping of potentially confused letters\n *\n * @hidden\n *\n * @example coerce(\"LLN\", \"0O8\") => \"OO8\"\n */\nconst coerce = (pattern, input) => input\n    .split(\"\")\n    .reduce((acc, c, i) => {\n    const target = pattern.charAt(i);\n    if (target === \"N\")\n        acc.push(toNumber[c] || c);\n    if (target === \"L\")\n        acc.push(toLetter[c] || c);\n    if (target === \"?\")\n        acc.push(c);\n    return acc;\n}, [])\n    .join(\"\");\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbXBvbmVudHMvcG9zdGNvZGUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsbURBQW1EO0FBRW5EOztHQUVHO0FBQ0gsTUFBTSxDQUFDLE1BQU0sb0JBQW9CLEdBQUcsMEJBQTBCLENBQUM7QUFDL0Q7O0dBRUc7QUFDSCxNQUFNLENBQUMsTUFBTSxVQUFVLEdBQUcsWUFBWSxDQUFDO0FBQ3ZDOztHQUVHO0FBQ0gsTUFBTSxDQUFDLE1BQU0sWUFBWSxHQUFHLGNBQWMsQ0FBQztBQUMzQzs7R0FFRztBQUNILE1BQU0sQ0FBQyxNQUFNLGFBQWEsR0FBRyx5QkFBeUIsQ0FBQztBQUN2RDs7R0FFRztBQUNILE1BQU0sQ0FBQyxNQUFNLGNBQWMsR0FBRyxzQ0FBc0MsQ0FBQztBQUVyRTs7R0FFRztBQUNILE1BQU0sQ0FBQyxNQUFNLHFCQUFxQixHQUFHLHFDQUFxQyxDQUFDO0FBRTNFOztHQUVHO0FBQ0gsTUFBTSxDQUFDLE1BQU0sVUFBVSxHQUFHLGNBQWMsQ0FBQztBQWdEekM7OztHQUdHO0FBQ0gsTUFBTSxlQUFlLEdBQW9CO0lBQ3JDLEtBQUssRUFBRSxLQUFLO0lBQ1osUUFBUSxFQUFFLElBQUk7SUFDZCxNQUFNLEVBQUUsSUFBSTtJQUNaLE9BQU8sRUFBRSxJQUFJO0lBQ2IsSUFBSSxFQUFFLElBQUk7SUFDVixRQUFRLEVBQUUsSUFBSTtJQUNkLFdBQVcsRUFBRSxJQUFJO0lBQ2pCLE1BQU0sRUFBRSxJQUFJO0lBQ1osSUFBSSxFQUFFLElBQUk7Q0FDYixDQUFDO0FBRUY7OztHQUdHO0FBQ0gsTUFBTSxXQUFXLEdBQUcsQ0FBQyxLQUE4QixFQUFpQixFQUFFO0lBQ2xFLElBQUksS0FBSyxLQUFLLElBQUk7UUFBRSxPQUFPLElBQUksQ0FBQztJQUNoQyxPQUFPLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNwQixDQUFDLENBQUM7QUFFRixNQUFNLFdBQVcsR0FBRyxPQUFPLENBQUM7QUFFNUI7OztHQUdHO0FBQ0gsTUFBTSxRQUFRLEdB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RyxDQUFDLE9BQWUsRUFBRSxLQUFhLEVBQVUsRUFBRSxDQUN0RCxLQUFLO0tBQ0EsS0FBSyxDQUFDLEVBQUUsQ0FBQztLQUNULE1BQU0sQ0FBVyxDQUFDLEdBQUcsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUU7SUFDNUIsTUFBTSxNQUFNLEdBQUcsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNqQyxJQUFJLE1BQU0sS0FBSyxHQUFHO1FBQUUsR0FBRyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7SUFDL0MsSUFBSSxNQUFNLEtBQUssR0FBRztRQUFFLEdBQUcsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO0lBQy9DLElBQUksTUFBTSxLQUFLLEdBQUc7UUFBRSxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ2hDLE9BQU8sR0FBRyxDQUFDO0FBQ2YsQ0FBQyxFQUFFLEVBQUUsQ0FBQztLQUNMLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyIsImZpbGUiOiJjb21wb25lbnRzL3Bvc3Rjb2RlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gZnJvbSBodHRwczovL2dpdGh1Yi5jb20vaWRlYWwtcG9zdGNvZGVzL3Bvc3Rjb2RlXHJcblxyXG4vKipcclxuICogQGhpZGRlblxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IERJU1RSSUNUX1NQTElUX1JFR0VYID0gL14oW2Etel17MSwyfVxcZCkoW2Etel0pJC9pO1xyXG4vKipcclxuICogVGVzdHMgZm9yIHRoZSB1bml0IHNlY3Rpb24gb2YgYSBwb3N0Y29kZVxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IFVOSVRfUkVHRVggPSAvW2Etel17Mn0kL2k7XHJcbi8qKlxyXG4gKiBUZXN0cyBmb3IgdGhlIGlud2FyZCBjb2RlIHNlY3Rpb24gb2YgYSBwb3N0Y29kZVxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IElOQ09ERV9SRUdFWCA9IC9cXGRbYS16XXsyfSQvaTtcclxuLyoqXHJcbiAqIFRlc3RzIGZvciB0aGUgb3V0d2FyZCBjb2RlIHNlY3Rpb24gb2YgYSBwb3N0Y29kZVxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IE9VVENPREVfUkVHRVggPSAvXlthLXpdezEsMn1cXGRbYS16XFxkXT8kL2k7XHJcbi8qKlxyXG4gKiBUZXN0cyBmb3IgYSB2YWxpZCBwb3N0Y29kZVxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IFBPU1RDT0RFX1JFR0VYID0gL15bYS16XXsxLDJ9XFxkW2EtelxcZF0/XFxzKlxcZFthLXpdezJ9JC9pO1xyXG5cclxuLyoqXHJcbiAqIFRlc3QgZm9yIGEgdmFsaWQgcG9zdGNvZGUgZW1iZWRkZWQgaW4gdGV4dFxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IFBPU1RDT0RFX0NPUlBVU19SRUdFWCA9IC9bYS16XXsxLDJ9XFxkW2EtelxcZF0/XFxzKlxcZFthLXpdezJ9L2dpO1xyXG5cclxuLyoqXHJcbiAqIFRlc3RzIGZvciB0aGUgYXJlYSBzZWN0aW9uIG9mIGEgcG9zdGNvZGVcclxuICovXHJcbmV4cG9ydCBjb25zdCBBUkVBX1JFR0VYID0gL15bYS16XXsxLDJ9L2k7XHJcblxyXG4vKipcclxuICogQGhpZGRlblxyXG4gKi9cclxuaW50ZXJmYWNlIFZhbGlkYXRvciB7XHJcbiAgICAoaW5wdXQ6IHN0cmluZyk6IGJvb2xlYW47XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAaGlkZGVuXHJcbiAqL1xyXG5pbnRlcmZhY2UgUGFyc2VyIHtcclxuICAgIC8qKlxyXG4gICAgICogQGhpZGRlblxyXG4gICAgICovXHJcbiAgICAocG9zdGNvZGU6IHN0cmluZyk6IHN0cmluZyB8IG51bGw7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBSZXByZXNlbnRzIGEgdmFsaWQgcG9zdGNvZGVcclxuICpcclxuICogTm90ZSB0aGF0IHJlc3VsdHMgd2lsbCBiZSBub3JtYWxpc2VkIChpLmUuIGNvcnJlY3RseSBmb3JtYXR0ZWQpLCBpbmNsdWRpbmcgYHBvc3Rjb2RlYFxyXG4gKi9cclxudHlwZSBWYWxpZFBvc3Rjb2RlID0ge1xyXG4gICAgdmFsaWQ6IHRydWU7XHJcbiAgICBwb3N0Y29kZTogc3RyaW5nO1xyXG4gICAgaW5jb2RlOiBzdHJpbmc7XHJcbiAgICBvdXRjb2RlOiBzdHJpbmc7XHJcbiAgICBhcmVhOiBzdHJpbmc7XHJcbiAgICBkaXN0cmljdDogc3RyaW5nO1xyXG4gICAgc3ViRGlzdHJpY3Q6IHN0cmluZyB8IG51bGw7XHJcbiAgICBzZWN0b3I6IHN0cmluZztcclxuICAgIHVuaXQ6IHN0cmluZztcclxufTtcclxuXHJcbnR5cGUgSW52YWxpZFBvc3Rjb2RlID0ge1xyXG4gICAgdmFsaWQ6IGZhbHNlO1xyXG4gICAgcG9zdGNvZGU6IG51bGw7XHJcbiAgICBpbmNvZGU6IG51bGw7XHJcbiAgICBvdXRjb2RlOiBudWxsO1xyXG4gICAgYXJlYTogbnVsbDtcclxuICAgIGRpc3RyaWN0OiBudWxsO1xyXG4gICAgc3ViRGlzdHJpY3Q6IG51bGw7XHJcbiAgICBzZWN0b3I6IG51bGw7XHJcbiAgICB1bml0OiBudWxsO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIEludmFsaWQgcG9zdGNvZGUgcHJvdG90eXBlXHJcbiAqIEBoaWRkZW5cclxuICovXHJcbmNvbnN0IGludmFsaWRQb3N0Y29kZTogSW52YWxpZFBvc3Rjb2RlID0ge1xyXG4gICAgdmFsaWQ6IGZhbHNlLFxyXG4gICAgcG9zdGNvZGU6IG51bGwsXHJcbiAgICBpbmNvZGU6IG51bGwsXHJcbiAgICBvdXRjb2RlOiBudWxsLFxyXG4gICAgYXJlYTogbnVsbCxcclxuICAgIGRpc3RyaWN0OiBudWxsLFxyXG4gICAgc3ViRGlzdHJpY3Q6IG51bGwsXHJcbiAgICBzZWN0b3I6IG51bGwsXHJcbiAgICB1bml0OiBudWxsLFxyXG59O1xyXG5cclxuLyoqXHJcbiAqIFJldHVybiBmaXJzdCBlbGVtIG9mIGlucHV0IGlzIFJlZ0V4cE1hdGNoQXJyYXkgb3IgbnVsbCBpZiBpbnB1dCBudWxsXHJcbiAqIEBoaWRkZW5cclxuICovXHJcbmNvbnN0IGZpcnN0T3JOdWxsID0gKG1hdGNoOiBSZWdFeHBNYXRjaEFycmF5IHwgbnVsbCk6IHN0cmluZyB8IG51bGwgPT4ge1xyXG4gICAgaWYgKG1hdGNoID09PSBudWxsKSByZXR1cm4gbnVsbDtcclxuICAgIHJldHVybiBtYXRjaFswXTtcclxufTtcclxuXHJcbmNvbnN0IFNQQUNFX1JFR0VYID0gL1xccysvZ2k7XHJcblxyXG4vKipcclxuICogRHJvcCBhbGwgc3BhY2VzIGFuZCB1cHBlcmNhc2VcclxuICogQGhpZGRlblxyXG4gKi9cclxuY29uc3Qgc2FuaXRpemUgPSAoczogc3RyaW5nKTogc3RyaW5nID0+XHJcbiAgICBzLnJlcGxhY2UoU1BBQ0VfUkVHRVgsIFwiXCIpLnRvVXBwZXJDYXNlKCk7XHJcblxyXG4vKipcclxuICogU2FuaXRpemVzIHN0cmluZyBhbmQgcmV0dXJucyByZWdleCBtYXRjaGVzXHJcbiAqIEBoaWRkZW5cclxuICovXHJcbmNvbnN0IG1hdGNoT24gPSAoczogc3RyaW5nLCByZWdleDogUmVnRXhwKTogUmVnRXhwTWF0Y2hBcnJheSB8IG51bGwgPT5cclxuICAgIHNhbml0aXplKHMpLm1hdGNoKHJlZ2V4KTtcclxuXHJcbi8qKlxyXG4gKiBEZXRlY3RzIGEgXCJ2YWxpZFwiIHBvc3Rjb2RlXHJcbiAqIC0gU3RhcnRzIGFuZCBlbmRzIG9uIGEgbm9uLXNwYWNlIGNoYXJhY3RlclxyXG4gKiAtIEFueSBsZW5ndGggb2YgaW50ZXJ2ZW5pbmcgc3BhY2UgaXMgYWxsb3dlZFxyXG4gKiAtIE11c3QgY29uZm9ybSB0byBvbmUgb2YgZm9sbG93aW5nIHNjaGVtYXM6XHJcbiAqICAtIEFBMUEgMUFBXHJcbiAqICAtIEExQSAxQUFcclxuICogIC0gQTEgMUFBXHJcbiAqICAtIEE5OSA5QUFcclxuICogIC0gQUE5IDlBQVxyXG4gKiAgLSBBQTk5IDlBQVxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IGlzVmFsaWQ6IFZhbGlkYXRvciA9IChwb3N0Y29kZSkgPT5cclxuICAgIHBvc3Rjb2RlLm1hdGNoKFBPU1RDT0RFX1JFR0VYKSAhPT0gbnVsbDtcclxuXHJcbi8qKlxyXG4gKiBSZXR1cm5zIHRydWUgaWYgc3RyaW5nIGlzIGEgdmFsaWQgb3V0Y29kZVxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IHZhbGlkT3V0Y29kZTogVmFsaWRhdG9yID0gKG91dGNvZGUpID0+XHJcbiAgICBvdXRjb2RlLm1hdGNoKE9VVENPREVfUkVHRVgpICE9PSBudWxsO1xyXG5cclxuLyoqXHJcbiAqIFJldHVybnMgYSBub3JtYWxpc2VkIHBvc3Rjb2RlIHN0cmluZyAoaS5lLiB1cHBlcmNhc2VkIGFuZCBwcm9wZXJseSBzcGFjZWQpXHJcbiAqXHJcbiAqIFJldHVybnMgbnVsbCBpZiBpbnZhbGlkIHBvc3Rjb2RlXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgdG9Ob3JtYWxpc2VkOiBQYXJzZXIgPSAocG9zdGNvZGUpID0+IHtcclxuICAgIGNvbnN0IG91dGNvZGUgPSB0b091dGNvZGUocG9zdGNvZGUpO1xyXG4gICAgaWYgKG91dGNvZGUgPT09IG51bGwpIHJldHVybiBudWxsO1xyXG4gICAgY29uc3QgaW5jb2RlID0gdG9JbmNvZGUocG9zdGNvZGUpO1xyXG4gICAgaWYgKGluY29kZSA9PT0gbnVsbCkgcmV0dXJuIG51bGw7XHJcbiAgICByZXR1cm4gYCR7b3V0Y29kZX0gJHtpbmNvZGV9YDtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBSZXR1cm5zIGEgY29ycmVjdGx5IGZvcm1hdHRlZCBvdXRjb2RlIGdpdmVuIGEgcG9zdGNvZGVcclxuICpcclxuICogUmV0dXJucyBudWxsIGlmIGludmFsaWQgcG9zdGNvZGVcclxuICovXHJcbmV4cG9ydCBjb25zdCB0b091dGNvZGU6IFBhcnNlciA9IChwb3N0Y29kZSkgPT4ge1xyXG4gICAgaWYgKCFpc1ZhbGlkKHBvc3Rjb2RlKSkgcmV0dXJuIG51bGw7XHJcbiAgICByZXR1cm4gc2FuaXRpemUocG9zdGNvZGUpLnJlcGxhY2UoSU5DT0RFX1JFR0VYLCBcIlwiKTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBSZXR1cm5zIGEgY29ycmVjdGx5IGZvcm1hdHRlZCBpbmNvZGUgZ2l2ZW4gYSBwb3N0Y29kZVxyXG4gKlxyXG4gKiBSZXR1cm5zIG51bGwgaWYgaW52YWxpZCBwb3N0Y29kZVxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IHRvSW5jb2RlOiBQYXJzZXIgPSAocG9zdGNvZGUpID0+IHtcclxuICAgIGlmICghaXNWYWxpZChwb3N0Y29kZSkpIHJldHVybiBudWxsO1xyXG4gICAgY29uc3QgbWF0Y2ggPSBtYXRjaE9uKHBvc3Rjb2RlLCBJTkNPREVfUkVHRVgpO1xyXG4gICAgcmV0dXJuIGZpcnN0T3JOdWxsKG1hdGNoKTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBSZXR1cm5zIGEgY29ycmVjdGx5IGZvcm1hdHRlZCBhcmVhIGdpdmVuIGEgcG9zdGNvZGVcclxuICpcclxuICogUmV0dXJucyBudWxsIGlmIGludmFsaWQgcG9zdGNvZGVcclxuICovXHJcbmV4cG9ydCBjb25zdCB0b0FyZWE6IFBhcnNlciA9IChwb3N0Y29kZSkgPT4ge1xyXG4gICAgaWYgKCFpc1ZhbGlkKHBvc3Rjb2RlKSkgcmV0dXJuIG51bGw7XHJcbiAgICBjb25zdCBtYXRjaCA9IG1hdGNoT24ocG9zdGNvZGUsIEFSRUFfUkVHRVgpO1xyXG4gICAgcmV0dXJuIGZpcnN0T3JOdWxsKG1hdGNoKTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBSZXR1cm5zIGEgY29ycmVjdGx5IGZvcm1hdHRlZCBzZWN0b3IgZ2l2ZW4gYSBwb3N0Y29kZVxyXG4gKlxyXG4gKiBSZXR1cm5zIG51bGwgaWYgaW52YWxpZCBwb3N0Y29kZVxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IHRvU2VjdG9yOiBQYXJzZXIgPSAocG9zdGNvZGUpID0+IHtcclxuICAgIGNvbnN0IG91dGNvZGUgPSB0b091dGNvZGUocG9zdGNvZGUpO1xyXG4gICAgaWYgKG91dGNvZGUgPT09IG51bGwpIHJldHVybiBudWxsO1xyXG4gICAgY29uc3QgaW5jb2RlID0gdG9JbmNvZGUocG9zdGNvZGUpO1xyXG4gICAgaWYgKGluY29kZSA9PT0gbnVsbCkgcmV0dXJuIG51bGw7XHJcbiAgICByZXR1cm4gYCR7b3V0Y29kZX0gJHtpbmNvZGVbMF19YDtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBSZXR1cm5zIGEgY29ycmVjdGx5IGZvcm1hdHRlZCB1bml0IGdpdmVuIGEgcG9zdGNvZGVcclxuICpcclxuICogUmV0dXJucyBudWxsIGlmIGludmFsaWQgcG9zdGNvZGVcclxuICovXHJcbmV4cG9ydCBjb25zdCB0b1VuaXQ6IFBhcnNlciA9IChwb3N0Y29kZSkgPT4ge1xyXG4gICAgaWYgKCFpc1ZhbGlkKHBvc3Rjb2RlKSkgcmV0dXJuIG51bGw7XHJcbiAgICBjb25zdCBtYXRjaCA9IG1hdGNoT24ocG9zdGNvZGUsIFVOSVRfUkVHRVgpO1xyXG4gICAgcmV0dXJuIGZpcnN0T3JOdWxsKG1hdGNoKTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBSZXR1cm5zIGEgY29ycmVjdGx5IGZvcm1hdHRlZCBkaXN0cmljdCBnaXZlbiBhIHBvc3Rjb2RlXHJcbiAqXHJcbiAqIFJldHVybnMgbnVsbCBpZiBpbnZhbGlkIHBvc3Rjb2RlXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqXHJcbiAqIGBgYFxyXG4gKiB0b0Rpc3RyaWN0KFwiQUE5IDlBQVwiKSAvLyA9PiBcIkFBOVwiXHJcbiAqIHRvRGlzdHJpY3QoXCJBOUEgOUFBXCIpIC8vID0+IFwiQTlcIlxyXG4gKiBgYGBcclxuICovXHJcbmV4cG9ydCBjb25zdCB0b0Rpc3RyaWN0OiBQYXJzZXIgPSAocG9zdGNvZGUpID0+IHtcclxuICAgIGNvbnN0IG91dGNvZGUgPSB0b091dGNvZGUocG9zdGNvZGUpO1xyXG4gICAgaWYgKG91dGNvZGUgPT09IG51bGwpIHJldHVybiBudWxsO1xyXG4gICAgY29uc3QgbWF0Y2ggPSBvdXRjb2RlLm1hdGNoKERJU1RSSUNUX1NQTElUX1JFR0VYKTtcclxuICAgIGlmIChtYXRjaCA9PT0gbnVsbCkgcmV0dXJuIG91dGNvZGU7XHJcbiAgICByZXR1cm4gbWF0Y2hbMV07XHJcbn07XHJcblxyXG4vKipcclxuICogUmV0dXJucyBhIGNvcnJlY3RseSBmb3JtYXR0ZWQgc3ViZGlzdHJpY3QgZ2l2ZW4gYSBwb3N0Y29kZVxyXG4gKlxyXG4gKiBSZXR1cm5zIG51bGwgaWYgbm8gc3ViZGlzdHJpY3QgaXMgYXZhaWxhYmxlIG9uIHZhbGlkIHBvc3Rjb2RlXHJcbiAqIFJldHVybnMgbnVsbCBpZiBpbnZhbGlkIHBvc3Rjb2RlXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqXHJcbiAqIGBgYFxyXG4gKiB0b1N1YkRpc3RyaWN0KFwiQUE5QSA5QUFcIikgLy8gPT4gXCJBQTlBXCJcclxuICogdG9TdWJEaXN0cmljdChcIkE5QSA5QUFcIikgLy8gPT4gXCJBOUFcIlxyXG4gKiB0b1N1YkRpc3RyaWN0KFwiQUE5IDlBQVwiKSAvLyA9PiBudWxsXHJcbiAqIHRvU3ViRGlzdHJpY3QoXCJBOSA5QUFcIikgLy8gPT4gbnVsbFxyXG4gKiBgYGBcclxuICovXHJcbmV4cG9ydCBjb25zdCB0b1N1YkRpc3RyaWN0OiBQYXJzZXIgPSAocG9zdGNvZGUpID0+IHtcclxuICAgIGNvbnN0IG91dGNvZGUgPSB0b091dGNvZGUocG9zdGNvZGUpO1xyXG4gICAgaWYgKG91dGNvZGUgPT09IG51bGwpIHJldHVybiBudWxsO1xyXG4gICAgY29uc3Qgc3BsaXQgPSBvdXRjb2RlLm1hdGNoKERJU1RSSUNUX1NQTElUX1JFR0VYKTtcclxuICAgIGlmIChzcGxpdCA9PT0gbnVsbCkgcmV0dXJuIG51bGw7XHJcbiAgICByZXR1cm4gb3V0Y29kZTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBSZXR1cm5zIGEgVmFsaWRQb3N0Y29kZSBvciBJbnZhbGlkUG9zdGNvZGUgb2JqZWN0IGZyb20gYSBwb3N0Y29kZSBzdHJpbmdcclxuICpcclxuICogQGV4YW1wbGVcclxuICpcclxuICogYGBgXHJcbiAqIGltcG9ydCB7IHBhcnNlIH0gZnJvbSBcInBvc3Rjb2RlXCI7XHJcbiAqXHJcbiAqIGNvbnN0IHtcclxuICogcG9zdGNvZGUsICAgIC8vID0+IFwiU1cxQSAyQUFcIlxyXG4gKiBvdXRjb2RlLCAgICAgLy8gPT4gXCJTVzFBXCJcclxuICogaW5jb2RlLCAgICAgIC8vID0+IFwiMkFBXCJcclxuICogYXJlYSwgICAgICAgIC8vID0+IFwiU1dcIlxyXG4gKiBkaXN0cmljdCwgICAgLy8gPT4gXCJTVzFcIlxyXG4gKiB1bml0LCAgICAgICAgLy8gPT4gXCJBQVwiXHJcbiAqIHNlY3RvciwgICAgICAvLyA9PiBcIlNXMUEgMlwiXHJcbiAqIHN1YkRpc3RyaWN0LCAvLyA9PiBcIlNXMUFcIlxyXG4gKiB2YWxpZCwgICAgICAgLy8gPT4gdHJ1ZVxyXG4gKiB9ID0gcGFyc2UoXCJTdzFBICAgICAyYWFcIik7XHJcbiAqXHJcbiAqIGNvbnN0IHtcclxuICogcG9zdGNvZGUsICAgIC8vID0+IG51bGxcclxuICogb3V0Y29kZSwgICAgIC8vID0+IG51bGxcclxuICogaW5jb2RlLCAgICAgIC8vID0+IG51bGxcclxuICogYXJlYSwgICAgICAgIC8vID0+IG51bGxcclxuICogZGlzdHJpY3QsICAgIC8vID0+IG51bGxcclxuICogdW5pdCwgICAgICAgIC8vID0+IG51bGxcclxuICogc2VjdG9yLCAgICAgIC8vID0+IG51bGxcclxuICogc3ViRGlzdHJpY3QsIC8vID0+IG51bGxcclxuICogdmFsaWQsICAgICAgIC8vID0+IGZhbHNlXHJcbiAqIH0gPSBwYXJzZShcIiAgICBPaCBubywgKTogICBcIik7XHJcbiAqIGBgYFxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IHBhcnNlID0gKHBvc3Rjb2RlOiBzdHJpbmcpOiBWYWxpZFBvc3Rjb2RlIHwgSW52YWxpZFBvc3Rjb2RlID0+IHtcclxuICAgIGlmICghaXNWYWxpZChwb3N0Y29kZSkpIHJldHVybiB7IC4uLmludmFsaWRQb3N0Y29kZSB9O1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICB2YWxpZDogdHJ1ZSxcclxuICAgICAgICBwb3N0Y29kZTogdG9Ob3JtYWxpc2VkKHBvc3Rjb2RlKSBhcyBzdHJpbmcsXHJcbiAgICAgICAgaW5jb2RlOiB0b0luY29kZShwb3N0Y29kZSkgYXMgc3RyaW5nLFxyXG4gICAgICAgIG91dGNvZGU6IHRvT3V0Y29kZShwb3N0Y29kZSkgYXMgc3RyaW5nLFxyXG4gICAgICAgIGFyZWE6IHRvQXJlYShwb3N0Y29kZSkgYXMgc3RyaW5nLFxyXG4gICAgICAgIGRpc3RyaWN0OiB0b0Rpc3RyaWN0KHBvc3Rjb2RlKSBhcyBzdHJpbmcsXHJcbiAgICAgICAgc3ViRGlzdHJpY3Q6IHRvU3ViRGlzdHJpY3QocG9zdGNvZGUpLFxyXG4gICAgICAgIHNlY3RvcjogdG9TZWN0b3IocG9zdGNvZGUpIGFzIHN0cmluZyxcclxuICAgICAgICB1bml0OiB0b1VuaXQocG9zdGNvZGUpIGFzIHN0cmluZyxcclxuICAgIH07XHJcbn07XHJcblxyXG4vKipcclxuICogU2VhcmNoZXMgYSBib2R5IG9mIHRleHQgZm9yIHBvc3Rjb2RlIG1hdGNoZXNcclxuICpcclxuICogUmV0dXJucyBhbiBlbXB0eSBhcnJheSBpZiBubyBtYXRjaFxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKlxyXG4gKiBgYGBcclxuICogLy8gUmV0cmlldmUgdmFsaWQgcG9zdGNvZGVzIGluIGEgYm9keSBvZiB0ZXh0XHJcbiAqIGNvbnN0IG1hdGNoZXMgPSBtYXRjaChcIlRoZSBQTSBhbmQgaGVyIG5vLjIgbGl2ZSBhdCBTVzFBMmFhIGFuZCBTVzFBIDJBQlwiKTsgLy8gPT4gW1wiU1cxQTJhYVwiLCBcIlNXMUEgMkFCXCJdXHJcbiAqXHJcbiAqIC8vIFBlcmZvcm0gdHJhbnNmb3JtYXRpb25zIGxpa2Ugbm9ybWFsaXNhdGlvbiBwb3N0Y29kZXMgdXNpbmcgYC5tYXBgIGFuZCBgdG9Ob3JtYWxpc2VkYFxyXG4gKiBtYXRjaGVzLm1hcCh0b05vcm1hbGlzZWQpOyAvLyA9PiBbXCJTVzFBIDJBQVwiLCBcIlNXMUEgMkFCXCJdXHJcbiAqXHJcbiAqIC8vIE5vIG1hdGNoZXMgeWllbGRzIGVtcHR5IGFycmF5XHJcbiAqIG1hdGNoKFwiU29tZSBMb25kb24gb3V0d2FyZCBjb2RlcyBhcmUgU1cxQSwgTlcxIGFuZCBFMVwiKTsgLy8gPT4gW11cclxuICogYGBgXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgbWF0Y2ggPSAoY29ycHVzOiBzdHJpbmcpOiBzdHJpbmdbXSA9PlxyXG4gICAgY29ycHVzLm1hdGNoKFBPU1RDT0RFX0NPUlBVU19SRUdFWCkgfHwgW107XHJcblxyXG4vKipcclxuICogQGhpZGRlblxyXG4gKi9cclxuaW50ZXJmYWNlIFJlcGxhY2VSZXN1bHQge1xyXG4gICAgLyoqXHJcbiAgICAgKiBMaXN0IG9mIG1hdGNoaW5nIHBvc3Rjb2RlcyBmb3VuZCBpbnRleHRcclxuICAgICAqL1xyXG4gICAgbWF0Y2g6IHN0cmluZ1tdO1xyXG4gICAgLyoqXHJcbiAgICAgKiBCb2R5IG9mIHRleHQgd2l0aCBwb3N0Y29kZXMgcmVwbGFjZWQgKHdpdGggZW1wdHkgc3RyaW5nIGJ5IGRlZmF1bHQpXHJcbiAgICAgKi9cclxuICAgIHJlc3VsdDogc3RyaW5nO1xyXG59XHJcblxyXG4vKipcclxuICogUmVwbGFjZXMgcG9zdGNvZGVzIGluIGEgYm9keSBvZiB0ZXh0IHdpdGggYSBzdHJpbmdcclxuICpcclxuICogQnkgZGVmYXVsdCB0aGUgcmVwbGFjZW1lbnQgc3RyaW5nIGlzIGVtcHR5IHN0cmluZyBgXCJcImBcclxuICpcclxuICogQGV4YW1wbGVcclxuICpcclxuICogYGBgXHJcbiAqIC8vIFJlcGxhY2UgcG9zdGNvZGVzIGluIGEgYm9keSBvZiB0ZXh0XHJcbiAqIHJlcGxhY2UoXCJUaGUgUE0gYW5kIGhlciBuby4yIGxpdmUgYXQgU1cxQTJBQSBhbmQgU1cxQSAyQUJcIik7XHJcbiAqIC8vID0+IHsgbWF0Y2g6IFtcIlNXMUEyQUFcIiwgXCJTVzFBIDJBQlwiXSwgcmVzdWx0OiBcIlRoZSBQTSBhbmQgaGVyIG5vLjIgbGl2ZSBhdCAgYW5kIFwiIH1cclxuICpcclxuICogLy8gQWRkIGN1c3RvbSByZXBsYWNlbWVudFxyXG4gKiByZXBsYWNlKFwiVGhlIFBNIGxpdmVzIGF0IFNXMUEgMkFBXCIsIFwiRG93bmluZyBTdHJlZXRcIik7XHJcbiAqIC8vID0+IHsgbWF0Y2g6IFtcIlNXMUEgMkFBXCJdLCByZXN1bHQ6IFwiVGhlIFBNIGxpdmVzIGF0IERvd25pbmcgU3RyZWV0XCIgfTtcclxuICpcclxuICogLy8gTm8gbWF0Y2hcclxuICogcmVwbGFjZShcIlNvbWUgTG9uZG9uIG91dHdhcmQgY29kZXMgYXJlIFNXMUEsIE5XMSBhbmQgRTFcIik7XHJcbiAqIC8vID0+IHsgbWF0Y2g6IFtdLCByZXN1bHQ6IFwiU29tZSBMb25kb24gb3V0d2FyZCBjb2RlcyBhcmUgU1cxQSwgTlcxIGFuZCBFMVwiIH1cclxuICogYGBgXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgcmVwbGFjZSA9IChjb3JwdXM6IHN0cmluZywgcmVwbGFjZVdpdGggPSBcIlwiKTogUmVwbGFjZVJlc3VsdCA9PiAoe1xyXG4gICAgbWF0Y2g6IG1hdGNoKGNvcnB1cyksXHJcbiAgICByZXN1bHQ6IGNvcnB1cy5yZXBsYWNlKFBPU1RDT0RFX0NPUlBVU19SRUdFWCwgcmVwbGFjZVdpdGgpLFxyXG59KTtcclxuXHJcbmV4cG9ydCBjb25zdCBGSVhBQkxFX1JFR0VYID0gL15cXHMqW2EtejAxXXsxLDJ9WzAtOW9pXVthLXpcXGRdP1xccypbMC05b2ldW2EtejAxXXsyfVxccyokL2k7XHJcblxyXG4vKipcclxuICogQXR0ZW1wdHMgdG8gZml4IGFuZCBjbGVhbiBhIHBvc3Rjb2RlLiBTcGVjaWZpY2FsbHk6XHJcbiAqIC0gUGVyZm9ybXMgY2hhcmFjdGVyIGNvbnZlcnNpb24gb24gb2J2aW91c2x5IHdyb25nIGFuZCBjb21tb25seSBtaXhlZCB1cCBsZXR0ZXJzIChlLmcuIE8gPT4gMCBhbmQgdmljZSB2ZXJzYSlcclxuICogLSBUcmltcyBzdHJpbmdcclxuICogLSBQcm9wZXJseSBhZGRzIHNwYWNlIGJldHdlZW4gb3V0d2FyZCBhbmQgaW53YXJkIGNvZGVzXHJcbiAqXHJcbiAqIElmIHRoZSBwb3N0Y29kZSBjYW5ub3QgYmUgY29lcmNlZCBpbnRvIGEgdmFsaWQgZm9ybWF0LCB0aGUgb3JpZ2luYWwgc3RyaW5nIGlzIHJldHVybmVkXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogZml4KFwiIFNXMUEgIDJBT1wiKSA9PiBcIlNXMUEgMkFPXCIgLy8gUHJvcGVybHkgc3BhY2VzXHJcbiAqIGZpeChcIlNXMUEgMkEwXCIpID0+IFwiU1cxQSAyQU9cIiAvLyAwIGlzIGNvZXJjZWQgaW50byBcIjBcIlxyXG4gKiBgYGBcclxuICpcclxuICogQWltcyB0byBiZSB1c2VkIGluIGNvbmp1bmN0aW9uIHdpdGggcGFyc2UgdG8gbWFrZSBwb3N0Y29kZSBlbnRyeSBtb3JlIGZvcmdpdmluZzpcclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiBjb25zdCB7IGlud2FyZCB9ID0gcGFyc2UoZml4KFwiU1cxQSAyQTBcIikpOyAvLyBpbndhcmQgPSBcIjJBT1wiXHJcbiAqIGBgYFxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IGZpeCA9IChzOiBzdHJpbmcpOiBzdHJpbmcgPT4ge1xyXG4gICAgY29uc3QgbWF0Y2ggPSBzLm1hdGNoKEZJWEFCTEVfUkVHRVgpO1xyXG4gICAgaWYgKG1hdGNoID09PSBudWxsKSByZXR1cm4gcztcclxuICAgIHMgPSBzLnRvVXBwZXJDYXNlKCkudHJpbSgpLnJlcGxhY2UoL1xccysvZ2ksIFwiXCIpO1xyXG4gICAgY29uc3QgbCA9IHMubGVuZ3RoO1xyXG4gICAgY29uc3QgaW53YXJkID0gcy5zbGljZShsIC0gMywgbCk7XHJcbiAgICByZXR1cm4gYCR7Y29lcmNlT3V0Y29kZShzLnNsaWNlKDAsIGwgLSAzKSl9ICR7Y29lcmNlKFwiTkxMXCIsIGlud2FyZCl9YDtcclxufTtcclxuXHJcbmNvbnN0IHRvTGV0dGVyOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xyXG4gICAgXCIwXCI6IFwiT1wiLFxyXG4gICAgXCIxXCI6IFwiSVwiLFxyXG59O1xyXG5cclxuY29uc3QgdG9OdW1iZXI6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XHJcbiAgICBPOiBcIjBcIixcclxuICAgIEk6IFwiMVwiLFxyXG59O1xyXG5cclxuY29uc3QgY29lcmNlT3V0Y29kZSA9IChpOiBzdHJpbmcpOiBzdHJpbmcgPT4ge1xyXG4gICAgaWYgKGkubGVuZ3RoID09PSAyKSByZXR1cm4gY29lcmNlKFwiTE5cIiwgaSk7XHJcbiAgICBpZiAoaS5sZW5ndGggPT09IDMpIHJldHVybiBjb2VyY2UoXCJMPz9cIiwgaSk7XHJcbiAgICBpZiAoaS5sZW5ndGggPT09IDQpIHJldHVybiBjb2VyY2UoXCJMTE4/XCIsIGkpO1xyXG4gICAgcmV0dXJuIGk7XHJcbn07XHJcblxyXG4vKipcclxuICogR2l2ZW4gYSBwYXR0ZXJuIG9mIGxldHRlcnMsIG51bWJlcnMgYW5kIHVua25vd25zIHJlcHJlc2VudGVkIGFzIGEgc2VxdWVuY2VcclxuICogb2YgTCwgTnMgYW5kID8gcmVzcGVjdGl2ZWx5OyBjb2VyY2UgdGhlbSBpbnRvIHRoZSBjb3JyZWN0IHR5cGUgZ2l2ZW4gYVxyXG4gKiBtYXBwaW5nIG9mIHBvdGVudGlhbGx5IGNvbmZ1c2VkIGxldHRlcnNcclxuICpcclxuICogQGhpZGRlblxyXG4gKlxyXG4gKiBAZXhhbXBsZSBjb2VyY2UoXCJMTE5cIiwgXCIwTzhcIikgPT4gXCJPTzhcIlxyXG4gKi9cclxuY29uc3QgY29lcmNlID0gKHBhdHRlcm46IHN0cmluZywgaW5wdXQ6IHN0cmluZyk6IHN0cmluZyA9PlxyXG4gICAgaW5wdXRcclxuICAgICAgICAuc3BsaXQoXCJcIilcclxuICAgICAgICAucmVkdWNlPHN0cmluZ1tdPigoYWNjLCBjLCBpKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRhcmdldCA9IHBhdHRlcm4uY2hhckF0KGkpO1xyXG4gICAgICAgICAgICBpZiAodGFyZ2V0ID09PSBcIk5cIikgYWNjLnB1c2godG9OdW1iZXJbY10gfHwgYyk7XHJcbiAgICAgICAgICAgIGlmICh0YXJnZXQgPT09IFwiTFwiKSBhY2MucHVzaCh0b0xldHRlcltjXSB8fCBjKTtcclxuICAgICAgICAgICAgaWYgKHRhcmdldCA9PT0gXCI/XCIpIGFjYy5wdXNoKGMpO1xyXG4gICAgICAgICAgICByZXR1cm4gYWNjO1xyXG4gICAgICAgIH0sIFtdKVxyXG4gICAgICAgIC5qb2luKFwiXCIpOyJdfQ==\n","//todo: consent mode debugging/check: https://developers.google.com/tag-platform/devguides/consent-debugging\nimport { toOutcode } from './postcode';\nfunction gtag(command, ...args) {\n    window.dataLayer = window.dataLayer || [];\n    window.dataLayer.push(arguments);\n}\nlet GaMeasurementId = '';\n//todo: use prototype? (or class?)\n// (having an object (prototype/class) will ensure that GaMeasurementId will have already been set)\nexport default function initAnalytics(gaMeasurementId) {\n    // if the environment doesn't have a measurement id, don't load analytics\n    if (!Boolean(gaMeasurementId)) {\n        return;\n    }\n    GaMeasurementId = gaMeasurementId;\n    setDefaultConsent();\n    loadGaScript(gaMeasurementId);\n    gtag('js', new Date());\n    const pageViewParams = getPiiSafePageView(gaMeasurementId);\n    // set the config for auto generated events other than page_view\n    gtag('config', gaMeasurementId, {\n        send_page_view: false,\n        page_path: pageViewParams.page_path,\n        page_location: pageViewParams.page_location,\n        page_referrer: pageViewParams.referrer,\n        cookie_flags: 'secure'\n    });\n    //todo: if user has consented to analytics cookies\n    if (false) {\n        updateAnalyticsStorageConsent(true);\n    }\n    sendPageViewEvent();\n}\nfunction setDefaultConsent() {\n    gtag('consent', 'default', {\n        'analytics_storage': 'denied'\n    });\n    gtag('set', 'url_passthrough', true);\n}\nexport function updateAnalyticsStorageConsent(granted, delayMs) {\n    let options = {\n        'analytics_storage': granted ? 'granted' : 'denied'\n    };\n    if (typeof delayMs !== 'undefined') {\n        options['wait_for_update'] = delayMs;\n    }\n    gtag('consent', 'update', options);\n}\nexport function sendPageViewEvent() {\n    // send the page_view event manually (https://developers.google.com/analytics/devguides/collection/gtagjs/pages#default_behavior)\n    gtag('event', 'page_view', getPiiSafePageView(GaMeasurementId));\n}\nexport function sendAnalyticsCustomEvent(accepted, source) {\n    gtag('event', 'analytics', {\n        'accepted': accepted,\n        'source': source\n    });\n}\nfunction loadGaScript(gaMeasurementId) {\n    const f = document.getElementsByTagName('script')[0];\n    const j = document.createElement('script');\n    j.async = true;\n    j.src = 'https://www.googletagmanager.com/gtag/js?id=' + gaMeasurementId;\n    f.parentNode.insertBefore(j, f);\n}\nfunction getPiiSafePageView(gaMeasurementId) {\n    const pageView = {\n        page_title: document.title,\n        send_to: gaMeasurementId,\n        referrer: '',\n        page_location: '',\n        page_path: ''\n    };\n    //todo: set as referrer or page_referrer in pageView - does it matter? is it only picking it up from the config?\n    //todo: get piisafe referrer function\n    if (document.referrer !== '') {\n        const referrerUrl = new URL(document.referrer);\n        const piiSafeReferrerQueryString = getPiiSafeQueryString(referrerUrl.search);\n        if (piiSafeReferrerQueryString == null) {\n            pageView.referrer = document.referrer;\n        }\n        else {\n            const urlArray = document.referrer.split('?');\n            pageView.referrer = urlArray[0] + piiSafeReferrerQueryString;\n        }\n    }\n    const piiSafeQueryString = getPiiSafeQueryString(window.location.search);\n    if (piiSafeQueryString == null) {\n        pageView.page_location = window.location.href;\n        pageView.page_path = window.location.pathname + window.location.search;\n        return pageView;\n    }\n    const urlArray = window.location.href.split('?');\n    pageView.page_location = urlArray[0] + piiSafeQueryString;\n    pageView.page_path = window.location.pathname + piiSafeQueryString;\n    return pageView;\n}\nfunction getPiiSafeQueryString(queryString) {\n    //todo: for safety, convert to lowercase, so that if the user changes the case of the url, we still don't collect pii\n    const queryParams = new URLSearchParams(queryString);\n    let postcode = queryParams.get('postcode');\n    if (postcode == null) {\n        // null indicates original query params were already pii safe\n        return null;\n    }\n    postcode = toOutcode(postcode);\n    queryParams.set('postcode', postcode);\n    queryParams.delete('latitude');\n    queryParams.delete('longitude');\n    return '?' + queryParams.toString();\n}\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbXBvbmVudHMvYW5hbHl0aWNzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNBLDRHQUE0RztBQUU1RyxPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0sWUFBWSxDQUFBO0FBRXRDLFNBQVMsSUFBSSxDQUFDLE9BQWUsRUFBRSxHQUFHLElBQVc7SUFDekMsTUFBTSxDQUFDLFNBQVMsR0FBRyxNQUFNLENBQUMsU0FBUyxJQUFJLEVBQUUsQ0FBQztJQUMxQyxNQUFNLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQztBQUNyQyxDQUFDO0FBRUQsSUFBSSxlQUFlLEdBQVcsRUFBRSxDQUFDO0FBRWpDLGtDQUFrQztBQUNsQyxtR0FBbUc7QUFDbkcsTUFBTSxDQUFDLE9BQU8sVUFBVSxhQUFhLENBQUMsZUFBdUI7SUFFekQseUVBQXlFO0lBQ3pFLElBQUksQ0FBQyxPQUFPLENBQUMsZUFBZSxDQUFDLEVBQUU7UUFDM0IsT0FBTztLQUNWO0lBRUQsZUFBZSxHQUFHLGVBQWUsQ0FBQztJQUVsQyxpQkFBaUIsRUFBRSxDQUFDO0lBRXBCLFlBQVksQ0FBQyxlQUFlLENBQUMsQ0FBQztJQUU5QixJQUFJLENBQUMsSUFBSSxFQUFFLElBQUksSUFBSSxFQUFFLENBQUMsQ0FBQztJQUV2QixNQUFNLGNBQWMsR0FBRyxrQkFBa0IsQ0FBQyxlQUFlLENBQUMsQ0FBQztJQUUzRCxnRUFBZ0U7SUFDaEUsSUFBSSxDQUFDLFFBQVEsRUFBRSxlQUFlLEVBQUU7UUFDNUIsY0FBYyxFQUFFLEtBQUs7UUFDckIsU0FBUyxFQUFFLGNBQWMsQ0FBQyxTQUFTO1FBQ25DLGFBQWEsRUFBRSxjQUFjLENBQUMsYUFBYTtRQUMzQyxhQUFhLEVBQUUsY0FBYyxDQUFDLFFBQVE7UUFDdEMsWUFBWSxFQUFFLFFBQVE7S0FDekIsQ0FBQyxDQUFDO0lBRUgsa0RBQWtEO0lBQ2xELElBQUksS0FBSyxFQUFFO1FBQ1AsNkJBQTZCLENBQUMsSUFBSSxDQUFDLENBQUM7S0FD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QVEsQ0FBQyxTQUFTLEdBQUcsTUFBTSxDQUFDLFFBQVEsQ0FBQyxRQUFRLEdBQUcsTUFBTSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUM7UUFFdkUsT0FBTyxRQUFRLENBQUM7S0FDbkI7SUFFRCxNQUFNLFFBQVEsR0FBRyxNQUFNLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM7SUFFakQsUUFBUSxDQUFDLGFBQWEsR0FBRyxRQUFRLENBQUMsQ0FBQyxDQUFDLEdBQUcsa0JBQWtCLENBQUM7SUFDMUQsUUFBUSxDQUFDLFNBQVMsR0FBRyxNQUFNLENBQUMsUUFBUSxDQUFDLFFBQVEsR0FBRyxrQkFBa0IsQ0FBQztJQUVuRSxPQUFPLFFBQVEsQ0FBQztBQUNwQixDQUFDO0FBRUQsU0FBUyxxQkFBcUIsQ0FBQyxXQUFtQjtJQUU5QyxxSEFBcUg7SUFDckgsTUFBTSxXQUFXLEdBQUcsSUFBSSxlQUFlLENBQUMsV0FBVyxDQUFDLENBQUM7SUFFckQsSUFBSSxRQUFRLEdBQUcsV0FBVyxDQUFDLEdBQUcsQ0FBQyxVQUFVLENBQUMsQ0FBQztJQUMzQyxJQUFJLFFBQVEsSUFBSSxJQUFJLEVBQUU7UUFDbEIsNkRBQTZEO1FBQzdELE9BQU8sSUFBSSxDQUFDO0tBQ2Y7SUFFRCxRQUFRLEdBQUcsU0FBUyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBQy9CLFdBQVcsQ0FBQyxHQUFHLENBQUMsVUFBVSxFQUFFLFFBQVEsQ0FBQyxDQUFDO0lBQ3RDLFdBQVcsQ0FBQyxNQUFNLENBQUMsVUFBVSxDQUFDLENBQUM7SUFDL0IsV0FBVyxDQUFDLE1BQU0sQ0FBQyxXQUFXLENBQUMsQ0FBQztJQUVoQyxPQUFPLEdBQUcsR0FBRyxXQUFXLENBQUMsUUFBUSxFQUFFLENBQUM7QUFDeEMsQ0FBQyIsImZpbGUiOiJjb21wb25lbnRzL2FuYWx5dGljcy5qcyIsInNvdXJjZXNDb250ZW50IjpbIlxyXG4vL3RvZG86IGNvbnNlbnQgbW9kZSBkZWJ1Z2dpbmcvY2hlY2s6IGh0dHBzOi8vZGV2ZWxvcGVycy5nb29nbGUuY29tL3RhZy1wbGF0Zm9ybS9kZXZndWlkZXMvY29uc2VudC1kZWJ1Z2dpbmdcclxuXHJcbmltcG9ydCB7IHRvT3V0Y29kZSB9IGZyb20gJy4vcG9zdGNvZGUnXHJcblxyXG5mdW5jdGlvbiBndGFnKGNvbW1hbmQ6IHN0cmluZywgLi4uYXJnczogYW55W10pOiB2b2lkIHtcclxuICAgIHdpbmRvdy5kYXRhTGF5ZXIgPSB3aW5kb3cuZGF0YUxheWVyIHx8IFtdO1xyXG4gICAgd2luZG93LmRhdGFMYXllci5wdXNoKGFyZ3VtZW50cyk7XHJcbn1cclxuXHJcbmxldCBHYU1lYXN1cmVtZW50SWQ6IHN0cmluZyA9ICcnO1xyXG5cclxuLy90b2RvOiB1c2UgcHJvdG90eXBlPyAob3IgY2xhc3M/KVxyXG4vLyAoaGF2aW5nIGFuIG9iamVjdCAocHJvdG90eXBlL2NsYXNzKSB3aWxsIGVuc3VyZSB0aGF0IEdhTWVhc3VyZW1lbnRJZCB3aWxsIGhhdmUgYWxyZWFkeSBiZWVuIHNldClcclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaW5pdEFuYWx5dGljcyhnYU1lYXN1cmVtZW50SWQ6IHN0cmluZykge1xyXG5cclxuICAgIC8vIGlmIHRoZSBlbnZpcm9ubWVudCBkb2Vzbid0IGhhdmUgYSBtZWFzdXJlbWVudCBpZCwgZG9uJ3QgbG9hZCBhbmFseXRpY3NcclxuICAgIGlmICghQm9vbGVhbihnYU1lYXN1cmVtZW50SWQpKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIEdhTWVhc3VyZW1lbnRJZCA9IGdhTWVhc3VyZW1lbnRJZDtcclxuXHJcbiAgICBzZXREZWZhdWx0Q29uc2VudCgpO1xyXG5cclxuICAgIGxvYWRHYVNjcmlwdChnYU1lYXN1cmVtZW50SWQpO1xyXG5cclxuICAgIGd0YWcoJ2pzJywgbmV3IERhdGUoKSk7XHJcblxyXG4gICAgY29uc3QgcGFnZVZpZXdQYXJhbXMgPSBnZXRQaWlTYWZlUGFnZVZpZXcoZ2FNZWFzdXJlbWVudElkKTtcclxuXHJcbiAgICAvLyBzZXQgdGhlIGNvbmZpZyBmb3IgYXV0byBnZW5lcmF0ZWQgZXZlbnRzIG90aGVyIHRoYW4gcGFnZV92aWV3XHJcbiAgICBndGFnKCdjb25maWcnLCBnYU1lYXN1cmVtZW50SWQsIHtcclxuICAgICAgICBzZW5kX3BhZ2VfdmlldzogZmFsc2UsIC8vZGlzYWJsZSBhdXRvIHBhZ2VfdmlldyBtZWFzdXJlbWVudFxyXG4gICAgICAgIHBhZ2VfcGF0aDogcGFnZVZpZXdQYXJhbXMucGFnZV9wYXRoLFxyXG4gICAgICAgIHBhZ2VfbG9jYXRpb246IHBhZ2VWaWV3UGFyYW1zLnBhZ2VfbG9jYXRpb24sXHJcbiAgICAgICAgcGFnZV9yZWZlcnJlcjogcGFnZVZpZXdQYXJhbXMucmVmZXJyZXIsXHJcbiAgICAgICAgY29va2llX2ZsYWdzOiAnc2VjdXJlJ1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy90b2RvOiBpZiB1c2VyIGhhcyBjb25zZW50ZWQgdG8gYW5hbHl0aWNzIGNvb2tpZXNcclxuICAgIGlmIChmYWxzZSkge1xyXG4gICAgICAgIHVwZGF0ZUFuYWx5dGljc1N0b3JhZ2VDb25zZW50KHRydWUpO1xyXG4gICAgfVxyXG5cclxuICAgIHNlbmRQYWdlVmlld0V2ZW50KCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNldERlZmF1bHRDb25zZW50KCkge1xyXG4gICAgZ3RhZygnY29uc2VudCcsICdkZWZhdWx0Jywge1xyXG4gICAgICAgICdhbmFseXRpY3Nfc3RvcmFnZSc6ICdkZW5pZWQnXHJcbiAgICB9KTtcclxuXHJcbiAgICBndGFnKCdzZXQnLCAndXJsX3Bhc3N0aHJvdWdoJywgdHJ1ZSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVBbmFseXRpY3NTdG9yYWdlQ29uc2VudChncmFudGVkOiBib29sZWFuLCBkZWxheU1zPzogbnVtYmVyKSB7XHJcblxyXG4gICAgbGV0IG9wdGlvbnMgPSB7XHJcbiAgICAgICAgJ2FuYWx5dGljc19zdG9yYWdlJzogZ3JhbnRlZCA/ICdncmFudGVkJyA6ICdkZW5pZWQnXHJcbiAgICB9O1xyXG5cclxuICAgIGlmICh0eXBlb2YgZGVsYXlNcyAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICBvcHRpb25zWyd3YWl0X2Zvcl91cGRhdGUnXSA9IGRlbGF5TXM7XHJcbiAgICB9XHJcblxyXG4gICAgZ3RhZygnY29uc2VudCcsICd1cGRhdGUnLCBvcHRpb25zKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNlbmRQYWdlVmlld0V2ZW50KCkge1xyXG4gICAgLy8gc2VuZCB0aGUgcGFnZV92aWV3IGV2ZW50IG1hbnVhbGx5IChodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS9hbmFseXRpY3MvZGV2Z3VpZGVzL2NvbGxlY3Rpb24vZ3RhZ2pzL3BhZ2VzI2RlZmF1bHRfYmVoYXZpb3IpXHJcbiAgICBndGFnKCdldmVudCcsICdwYWdlX3ZpZXcnLCBnZXRQaWlTYWZlUGFnZVZpZXcoR2FNZWFzdXJlbWVudElkKSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzZW5kQW5hbHl0aWNzQ3VzdG9tRXZlbnQoYWNjZXB0ZWQ6IGJvb2xlYW4sIHNvdXJjZTogc3RyaW5nKSB7XHJcblxyXG4gICAgZ3RhZygnZXZlbnQnLCAnYW5hbHl0aWNzJywge1xyXG4gICAgICAgICdhY2NlcHRlZCc6IGFjY2VwdGVkLFxyXG4gICAgICAgICdzb3VyY2UnOiBzb3VyY2VcclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBsb2FkR2FTY3JpcHQoZ2FNZWFzdXJlbWVudElkOiBzdHJpbmcpIHtcclxuICAgIGNvbnN0IGYgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnc2NyaXB0JylbMF07XHJcbiAgICBjb25zdCBqID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XHJcbiAgICBqLmFzeW5jID0gdHJ1ZTtcclxuICAgIGouc3JjID0gJ2h0dHBzOi8vd3d3Lmdvb2dsZXRhZ21hbmFnZXIuY29tL2d0YWcvanM/aWQ9JyArIGdhTWVhc3VyZW1lbnRJZDtcclxuICAgIGYucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoaiwgZik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldFBpaVNhZmVQYWdlVmlldyhnYU1lYXN1cmVtZW50SWQ6IHN0cmluZykge1xyXG5cclxuICAgIGNvbnN0IHBhZ2VWaWV3ID0ge1xyXG4gICAgICAgIHBhZ2VfdGl0bGU6IGRvY3VtZW50LnRpdGxlLFxyXG4gICAgICAgIHNlbmRfdG86IGdhTWVhc3VyZW1lbnRJZCxcclxuICAgICAgICByZWZlcnJlcjogJycsXHJcbiAgICAgICAgcGFnZV9sb2NhdGlvbjogJycsXHJcbiAgICAgICAgcGFnZV9wYXRoOiAnJ1xyXG4gICAgfTtcclxuXHJcbiAgICAvL3RvZG86IHNldCBhcyByZWZlcnJlciBvciBwYWdlX3JlZmVycmVyIGluIHBhZ2VWaWV3IC0gZG9lcyBpdCBtYXR0ZXI/IGlzIGl0IG9ubHkgcGlja2luZyBpdCB1cCBmcm9tIHRoZSBjb25maWc/XHJcbiAgICAvL3RvZG86IGdldCBwaWlzYWZlIHJlZmVycmVyIGZ1bmN0aW9uXHJcbiAgICBpZiAoZG9jdW1lbnQucmVmZXJyZXIgIT09ICcnKSB7XHJcbiAgICAgICAgY29uc3QgcmVmZXJyZXJVcmwgPSBuZXcgVVJMKGRvY3VtZW50LnJlZmVycmVyKTtcclxuICAgICAgICBjb25zdCBwaWlTYWZlUmVmZXJyZXJRdWVyeVN0cmluZyA9IGdldFBpaVNhZmVRdWVyeVN0cmluZyhyZWZlcnJlclVybC5zZWFyY2gpO1xyXG4gICAgICAgIGlmIChwaWlTYWZlUmVmZXJyZXJRdWVyeVN0cmluZyA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHBhZ2VWaWV3LnJlZmVycmVyID0gZG9jdW1lbnQucmVmZXJyZXI7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgdXJsQXJyYXkgPSBkb2N1bWVudC5yZWZlcnJlci5zcGxpdCgnPycpO1xyXG5cclxuICAgICAgICAgICAgcGFnZVZpZXcucmVmZXJyZXIgPSB1cmxBcnJheVswXSArIHBpaVNhZmVSZWZlcnJlclF1ZXJ5U3RyaW5nO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBwaWlTYWZlUXVlcnlTdHJpbmcgPSBnZXRQaWlTYWZlUXVlcnlTdHJpbmcod2luZG93LmxvY2F0aW9uLnNlYXJjaCk7XHJcblxyXG4gICAgaWYgKHBpaVNhZmVRdWVyeVN0cmluZyA9PSBudWxsKSB7XHJcbiAgICAgICAgcGFnZVZpZXcucGFnZV9sb2NhdGlvbiA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmO1xyXG4gICAgICAgIHBhZ2VWaWV3LnBhZ2VfcGF0aCA9IHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSArIHdpbmRvdy5sb2NhdGlvbi5zZWFyY2g7XHJcblxyXG4gICAgICAgIHJldHVybiBwYWdlVmlldztcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB1cmxBcnJheSA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmLnNwbGl0KCc/Jyk7XHJcblxyXG4gICAgcGFnZVZpZXcucGFnZV9sb2NhdGlvbiA9IHVybEFycmF5WzBdICsgcGlpU2FmZVF1ZXJ5U3RyaW5nO1xyXG4gICAgcGFnZVZpZXcucGFnZV9wYXRoID0gd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lICsgcGlpU2FmZVF1ZXJ5U3RyaW5nO1xyXG5cclxuICAgIHJldHVybiBwYWdlVmlldztcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0UGlpU2FmZVF1ZXJ5U3RyaW5nKHF1ZXJ5U3RyaW5nOiBzdHJpbmcpOiBzdHJpbmcgfCBudWxsIHtcclxuXHJcbiAgICAvL3RvZG86IGZvciBzYWZldHksIGNvbnZlcnQgdG8gbG93ZXJjYXNlLCBzbyB0aGF0IGlmIHRoZSB1c2VyIGNoYW5nZXMgdGhlIGNhc2Ugb2YgdGhlIHVybCwgd2Ugc3RpbGwgZG9uJ3QgY29sbGVjdCBwaWlcclxuICAgIGNvbnN0IHF1ZXJ5UGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhxdWVyeVN0cmluZyk7XHJcblxyXG4gICAgbGV0IHBvc3Rjb2RlID0gcXVlcnlQYXJhbXMuZ2V0KCdwb3N0Y29kZScpO1xyXG4gICAgaWYgKHBvc3Rjb2RlID09IG51bGwpIHtcclxuICAgICAgICAvLyBudWxsIGluZGljYXRlcyBvcmlnaW5hbCBxdWVyeSBwYXJhbXMgd2VyZSBhbHJlYWR5IHBpaSBzYWZlXHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgcG9zdGNvZGUgPSB0b091dGNvZGUocG9zdGNvZGUpO1xyXG4gICAgcXVlcnlQYXJhbXMuc2V0KCdwb3N0Y29kZScsIHBvc3Rjb2RlKTtcclxuICAgIHF1ZXJ5UGFyYW1zLmRlbGV0ZSgnbGF0aXR1ZGUnKTtcclxuICAgIHF1ZXJ5UGFyYW1zLmRlbGV0ZSgnbG9uZ2l0dWRlJyk7XHJcblxyXG4gICAgcmV0dXJuICc/JyArIHF1ZXJ5UGFyYW1zLnRvU3RyaW5nKCk7XHJcbn1cclxuIl19\n","import initAnalytics from './components/analytics';\ninitAnalytics(window.GA_MEASUREMENT_ID);\n(function ($) {\n    'use strict';\n    function fhgov() {\n        this.init = function () {\n            showHideFilters();\n            cookiesBanner();\n        };\n        let showHideFilters = function () {\n            $('.js-show-hide-filters').click(function (evt) {\n                evt.preventDefault();\n                $('.filters-component').toggleClass('app-results-filter-overlay');\n                $('body').toggleClass('app-results-filter-overlay-active');\n            });\n        };\n        let cookiesBanner = function () {\n            let $cookiesBanner = $('.govuk-cookie-banner');\n            let $cookiesBannerMessage = $('.govuk-cookie-banner__message');\n            let $cookiesBannerConfirmation = $('.govuk-cookie-banner__confirmation');\n            let $cookiesBannerAccepted = $('.govuk-cookie-banner__confirmation-message__accepted');\n            let $cookiesBannerRejected = $('.govuk-cookie-banner__confirmation-message__rejected');\n            let date = new Date();\n            date.setTime(date.getTime() + 24 * 60 * 60 * 1000 * 365);\n            let cookiesAccept = function () {\n                document.cookie = `service_directory_cookies_policy=accept; expires=date; path=/`;\n                $cookiesBannerMessage.addClass('govuk-hidden');\n                $cookiesBannerConfirmation.removeClass('govuk-hidden');\n                $cookiesBannerAccepted.removeClass('govuk-hidden');\n                $('#cookies-page-accepted').prop('checked', true);\n            };\n            let cookiesReject = function () {\n                deleteCookies();\n                document.cookie = `service_directory_cookies_policy=reject; expires=date; path=/`;\n                $cookiesBannerMessage.addClass('govuk-hidden');\n                $cookiesBannerConfirmation.removeClass('govuk-hidden');\n                $cookiesBannerRejected.removeClass('govuk-hidden');\n                $('#cookies-page-rejected').prop('checked', true);\n            };\n            let getCookie = function (name) {\n                let cookieArr = document.cookie.split(\";\");\n                for (let i = 0; i < cookieArr.length; i++) {\n                    let cookiePair = cookieArr[i].split(\"=\");\n                    if (name == cookiePair[0].trim()) {\n                        return decodeURIComponent(cookiePair[1]);\n                    }\n                }\n            };\n            let deleteCookies = function () {\n                let cookies = document.cookie.split(\";\");\n                for (let i = 0; i < cookies.length; i++) {\n                    let equals = cookies[i].indexOf(\"=\");\n                    let name = equals > -1 ? cookies[i].substr(0, equals) : cookies[i];\n                    document.cookie = name + \"=;expires=Thu, 01 Jan 1970 00:00:00 GMT\";\n                }\n            };\n            let cookie_value = getCookie('service_directory_cookies_policy');\n            if (typeof cookie_value === 'undefined') {\n                $cookiesBanner.removeClass('govuk-hidden');\n                $('#cookies-banner-accept').click(function () {\n                    cookiesAccept();\n                });\n                $('#cookies-banner-reject').click(function () {\n                    cookiesReject();\n                });\n                $('#cookies-banner-close').click(function () {\n                    $cookiesBanner.addClass('govuk-hidden');\n                });\n            }\n            else if (cookie_value === 'accept') {\n                $('#cookies-page-accepted').prop('checked', true);\n            }\n            else if (cookie_value === 'reject') {\n                $('#cookies-page-rejected').prop('checked', true);\n            }\n            $('#cookies-page-save').click(function () {\n                if ($('#cookies-page-accepted').is(':checked')) {\n                    cookiesAccept();\n                    $('#cookies-saved-notification').removeClass('govuk-hidden');\n                    $('html, body').animate({ scrollTop: 0 }, 'fast');\n                }\n                if ($('#cookies-page-rejected').is(':checked')) {\n                    cookiesReject();\n                    $('#cookies-saved-notification').removeClass('govuk-hidden');\n                    $('html, body').animate({ scrollTop: 0 }, 'fast');\n                }\n            });\n        };\n    }\n    window.fhgov = new fhgov();\n})(jQuery);\n//todo: move into $(document).ready()?\nwindow.fhgov.init();\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,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QUUsQ0FBQztBQUM1QixDQUFDLENBQ0EsQ0FBQyxNQUFNLENBQUMsQ0FBQztBQUVWLHNDQUFzQztBQUN0QyxNQUFNLENBQUMsS0FBSyxDQUFDLElBQUksRUFBRSxDQUFDIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCB7IH07XHJcblxyXG5kZWNsYXJlIGdsb2JhbCB7XHJcbiAgICBpbnRlcmZhY2UgV2luZG93IHtcclxuICAgICAgICBmaGdvdjogYW55O1xyXG4gICAgICAgIEdBX01FQVNVUkVNRU5UX0lEOiBzdHJpbmc7XHJcbiAgICAgICAgR0FfQ09OVEFJTkVSX0lEOiBzdHJpbmc7XHJcbiAgICAgICAgZGF0YUxheWVyOiBhbnlbXTtcclxuICAgIH1cclxufVxyXG5cclxuaW1wb3J0IGluaXRBbmFseXRpY3MgZnJvbSAnLi9jb21wb25lbnRzL2FuYWx5dGljcyc7XHJcblxyXG5pbml0QW5hbHl0aWNzKHdpbmRvdy5HQV9NRUFTVVJFTUVOVF9JRCk7XHJcblxyXG4oZnVuY3Rpb24gKCQpIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblx0ZnVuY3Rpb24gZmhnb3YoKSB7XHJcblx0XHR0aGlzLmluaXQgPSBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdHNob3dIaWRlRmlsdGVycygpO1xyXG5cdFx0XHRjb29raWVzQmFubmVyKCk7XHJcblx0XHR9O1xyXG5cclxuXHRcdGxldCBzaG93SGlkZUZpbHRlcnMgPSBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdCQoJy5qcy1zaG93LWhpZGUtZmlsdGVycycpLmNsaWNrKGZ1bmN0aW9uIChldnQpIHtcclxuXHRcdFx0XHRldnQucHJldmVudERlZmF1bHQoKTtcclxuXHJcblx0XHRcdFx0JCgnLmZpbHRlcnMtY29tcG9uZW50JykudG9nZ2xlQ2xhc3MoJ2FwcC1yZXN1bHRzLWZpbHRlci1vdmVybGF5Jyk7XHJcblx0XHRcdFx0JCgnYm9keScpLnRvZ2dsZUNsYXNzKCdhcHAtcmVzdWx0cy1maWx0ZXItb3ZlcmxheS1hY3RpdmUnKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblxyXG5cdFx0bGV0IGNvb2tpZXNCYW5uZXIgPSBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdGxldCAkY29va2llc0Jhbm5lciA9ICQoJy5nb3Z1ay1jb29raWUtYmFubmVyJyk7XHJcblx0XHRcdGxldCAkY29va2llc0Jhbm5lck1lc3NhZ2UgPSAkKCcuZ292dWstY29va2llLWJhbm5lcl9fbWVzc2FnZScpO1xyXG5cdFx0XHRsZXQgJGNvb2tpZXNCYW5uZXJDb25maXJtYXRpb24gPSAkKCcuZ292dWstY29va2llLWJhbm5lcl9fY29uZmlybWF0aW9uJyk7XHJcblx0XHRcdGxldCAkY29va2llc0Jhbm5lckFjY2VwdGVkID0gJCgnLmdvdnVrLWNvb2tpZS1iYW5uZXJfX2NvbmZpcm1hdGlvbi1tZXNzYWdlX19hY2NlcHRlZCcpO1xyXG5cdFx0XHRsZXQgJGNvb2tpZXNCYW5uZXJSZWplY3RlZCA9ICQoJy5nb3Z1ay1jb29raWUtYmFubmVyX19jb25maXJtYXRpb24tbWVzc2FnZV9fcmVqZWN0ZWQnKTtcclxuXHRcdFx0bGV0IGRhdGUgPSBuZXcgRGF0ZSgpO1xyXG5cclxuXHRcdFx0ZGF0ZS5zZXRUaW1lKGRhdGUuZ2V0VGltZSgpICsgMjQgKiA2MCAqIDYwICogMTAwMCAqIDM2NSk7XHJcblxyXG5cdFx0XHRsZXQgY29va2llc0FjY2VwdCA9IGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0XHRkb2N1bWVudC5jb29raWUgPSBgc2VydmljZV9kaXJlY3RvcnlfY29va2llc19wb2xpY3k9YWNjZXB0OyBleHBpcmVzPWRhdGU7IHBhdGg9L2A7XHJcblxyXG5cdFx0XHRcdCRjb29raWVzQmFubmVyTWVzc2FnZS5hZGRDbGFzcygnZ292dWstaGlkZGVuJyk7XHJcblx0XHRcdFx0JGNvb2tpZXNCYW5uZXJDb25maXJtYXRpb24ucmVtb3ZlQ2xhc3MoJ2dvdnVrLWhpZGRlbicpO1xyXG5cdFx0XHRcdCRjb29raWVzQmFubmVyQWNjZXB0ZWQucmVtb3ZlQ2xhc3MoJ2dvdnVrLWhpZGRlbicpO1xyXG5cdFx0XHRcdCQoJyNjb29raWVzLXBhZ2UtYWNjZXB0ZWQnKS5wcm9wKCdjaGVja2VkJywgdHJ1ZSk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGxldCBjb29raWVzUmVqZWN0ID0gZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRcdGRlbGV0ZUNvb2tpZXMoKTtcclxuXHRcdFx0XHRkb2N1bWVudC5jb29raWUgPSBgc2VydmljZV9kaXJlY3RvcnlfY29va2llc19wb2xpY3k9cmVqZWN0OyBleHBpcmVzPWRhdGU7IHBhdGg9L2A7XHJcblxyXG5cdFx0XHRcdCRjb29raWVzQmFubmVyTWVzc2FnZS5hZGRDbGFzcygnZ292dWstaGlkZGVuJyk7XHJcblx0XHRcdFx0JGNvb2tpZXNCYW5uZXJDb25maXJtYXRpb24ucmVtb3ZlQ2xhc3MoJ2dvdnVrLWhpZGRlbicpO1xyXG5cdFx0XHRcdCRjb29raWVzQmFubmVyUmVqZWN0ZWQucmVtb3ZlQ2xhc3MoJ2dvdnVrLWhpZGRlbicpO1xyXG5cdFx0XHRcdCQoJyNjb29raWVzLXBhZ2UtcmVqZWN0ZWQnKS5wcm9wKCdjaGVja2VkJywgdHJ1ZSk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGxldCBnZXRDb29raWUgPSBmdW5jdGlvbiAobmFtZSkge1xyXG5cdFx0XHRcdGxldCBjb29raWVBcnIgPSBkb2N1bWVudC5jb29raWUuc3BsaXQoXCI7XCIpO1xyXG5cdFx0XHRcdGZvciAobGV0IGkgPSAwOyBpIDwgY29va2llQXJyLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdFx0XHRsZXQgY29va2llUGFpciA9IGNvb2tpZUFycltpXS5zcGxpdChcIj1cIik7XHJcblx0XHRcdFx0XHRpZiAobmFtZSA9PSBjb29raWVQYWlyWzBdLnRyaW0oKSkge1xyXG5cdFx0XHRcdFx0XHRyZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KGNvb2tpZVBhaXJbMV0pO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0bGV0IGRlbGV0ZUNvb2tpZXMgPSBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdFx0bGV0IGNvb2tpZXMgPSBkb2N1bWVudC5jb29raWUuc3BsaXQoXCI7XCIpO1xyXG5cdFx0XHRcdGZvciAobGV0IGkgPSAwOyBpIDwgY29va2llcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRcdFx0bGV0IGVxdWFscyA9IGNvb2tpZXNbaV0uaW5kZXhPZihcIj1cIik7XHJcblx0XHRcdFx0XHRsZXQgbmFtZSA9IGVxdWFscyA+IC0xID8gY29va2llc1tpXS5zdWJzdHIoMCwgZXF1YWxzKSA6IGNvb2tpZXNbaV07XHJcblx0XHRcdFx0XHRkb2N1bWVudC5jb29raWUgPSBuYW1lICsgXCI9O2V4cGlyZXM9VGh1LCAwMSBKYW4gMTk3MCAwMDowMDowMCBHTVRcIjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGxldCBjb29raWVfdmFsdWUgPSBnZXRDb29raWUoJ3NlcnZpY2VfZGlyZWN0b3J5X2Nvb2tpZXNfcG9saWN5Jyk7XHJcblxyXG5cdFx0XHRpZiAodHlwZW9mIGNvb2tpZV92YWx1ZSA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuXHRcdFx0XHQkY29va2llc0Jhbm5lci5yZW1vdmVDbGFzcygnZ292dWstaGlkZGVuJyk7XHJcblxyXG5cdFx0XHRcdCQoJyNjb29raWVzLWJhbm5lci1hY2NlcHQnKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcblx0XHRcdFx0XHRjb29raWVzQWNjZXB0KCk7XHJcblx0XHRcdFx0fSk7XHJcblxyXG5cdFx0XHRcdCQoJyNjb29raWVzLWJhbm5lci1yZWplY3QnKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcblx0XHRcdFx0XHRjb29raWVzUmVqZWN0KCk7XHJcblx0XHRcdFx0fSk7XHJcblxyXG5cdFx0XHRcdCQoJyNjb29raWVzLWJhbm5lci1jbG9zZScpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0XHRcdCRjb29raWVzQmFubmVyLmFkZENsYXNzKCdnb3Z1ay1oaWRkZW4nKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fSBlbHNlIGlmIChjb29raWVfdmFsdWUgPT09ICdhY2NlcHQnKSB7XHJcblx0XHRcdFx0JCgnI2Nvb2tpZXMtcGFnZS1hY2NlcHRlZCcpLnByb3AoJ2NoZWNrZWQnLCB0cnVlKTtcclxuXHRcdFx0fSBlbHNlIGlmIChjb29raWVfdmFsdWUgPT09ICdyZWplY3QnKSB7XHJcblx0XHRcdFx0JCgnI2Nvb2tpZXMtcGFnZS1yZWplY3RlZCcpLnByb3AoJ2NoZWNrZWQnLCB0cnVlKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0JCgnI2Nvb2tpZXMtcGFnZS1zYXZlJykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRcdGlmICgkKCcjY29va2llcy1wYWdlLWFjY2VwdGVkJykuaXMoJzpjaGVja2VkJykpIHtcclxuXHRcdFx0XHRcdGNvb2tpZXNBY2NlcHQoKTtcclxuXHRcdFx0XHRcdCQoJyNjb29raWVzLXNhdmVkLW5vdGlmaWNhdGlvbicpLnJlbW92ZUNsYXNzKCdnb3Z1ay1oaWRkZW4nKTtcclxuXHRcdFx0XHRcdCQoJ2h0bWwsIGJvZHknKS5hbmltYXRlKHsgc2Nyb2xsVG9wOiAwIH0sICdmYXN0Jyk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGlmICgkKCcjY29va2llcy1wYWdlLXJlamVjdGVkJykuaXMoJzpjaGVja2VkJykpIHtcclxuXHRcdFx0XHRcdGNvb2tpZXNSZWplY3QoKTtcclxuXHRcdFx0XHRcdCQoJyNjb29raWVzLXNhdmVkLW5vdGlmaWNhdGlvbicpLnJlbW92ZUNsYXNzKCdnb3Z1ay1oaWRkZW4nKTtcclxuXHRcdFx0XHRcdCQoJ2h0bWwsIGJvZHknKS5hbmltYXRlKHsgc2Nyb2xsVG9wOiAwIH0sICdmYXN0Jyk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHdpbmRvdy5maGdvdiA9IG5ldyBmaGdvdigpO1xyXG59XHJcbikoalF1ZXJ5KTtcclxuXHJcbi8vdG9kbzogbW92ZSBpbnRvICQoZG9jdW1lbnQpLnJlYWR5KCk/XHJcbndpbmRvdy5maGdvdi5pbml0KCk7Il19\n"]}